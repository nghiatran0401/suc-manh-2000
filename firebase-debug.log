[debug] [2024-06-15T22:44:33.559Z] ----------------------------------------------------------------------
[debug] [2024-06-15T22:44:33.560Z] Command:       /Users/hacthe/.nvm/versions/node/v18.17.1/bin/node /Users/hacthe/.nvm/versions/node/v18.17.1/bin/firebase emulators:start
[debug] [2024-06-15T22:44:33.560Z] CLI Version:   13.3.0
[debug] [2024-06-15T22:44:33.560Z] Platform:      darwin
[debug] [2024-06-15T22:44:33.560Z] Node Version:  v18.17.1
[debug] [2024-06-15T22:44:33.561Z] Time:          Sun Jun 16 2024 05:44:33 GMT+0700 (Indochina Time)
[debug] [2024-06-15T22:44:33.561Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-06-15T22:44:33.613Z] Field ".functions" in "firebase.json" is possibly invalid: should be object
[debug] [2024-06-15T22:44:33.614Z] Object ".functions[0]" in "firebase.json" has unknown property: {"additionalProperty":"region"}
[debug] [2024-06-15T22:44:33.614Z] Field ".functions" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2024-06-15T22:44:33.616Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-06-15T22:44:33.617Z] > authorizing via signed-in user (the.duong@codelink.io)
[debug] [2024-06-15T22:44:33.682Z] java version "18.0.2" 2022-07-19

[debug] [2024-06-15T22:44:33.682Z] Java(TM) SE Runtime Environment (build 18.0.2+9-61)
Java HotSpot(TM) 64-Bit Server VM (build 18.0.2+9-61, mixed mode, sharing)

[debug] [2024-06-15T22:44:33.687Z] Parsed Java major version: 18
[info] i  emulators: Starting emulators: auth, functions, firestore, hosting {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, hosting"}}
[debug] [2024-06-15T22:44:34.564Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-06-15T22:44:34.564Z] [auth] Authentication Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-06-15T22:44:34.564Z] [firestore] Firestore Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-06-15T22:44:34.565Z] [hosting] Hosting Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-06-15T22:44:34.565Z] [firestore.websocket] websocket server for firestore only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-06-15T22:44:34.565Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4005},{"address":"::1","family":"IPv6","port":4005}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":4001}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":4002}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":4004}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9151}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2024-06-15T22:44:34.569Z] [hub] writing locator at /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/hub-sucmanh2000-2b5f0.json
[debug] [2024-06-15T22:44:34.797Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-06-15T22:44:34.797Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-06-15T22:44:34.797Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4005},{"address":"::1","family":"IPv6","port":4005}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":4001}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":4002}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":4004}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9151}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":4003}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: database, pubsub, storage {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mdatabase, pubsub, storage\u001b[22m"}}
[debug] [2024-06-15T22:44:34.798Z] defaultcredentials: writing to file /Users/hacthe/.config/firebase/the_duong_codelink.io_application_default_credentials.json
[debug] [2024-06-15T22:44:34.802Z] Setting GAC to /Users/hacthe/.config/firebase/the_duong_codelink.io_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/hacthe/.config/firebase/the_duong_codelink.io_application_default_credentials.json"}}
[debug] [2024-06-15T22:44:34.803Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0/adminSdkConfig [none]
[debug] [2024-06-15T22:44:35.483Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0/adminSdkConfig 403
[debug] [2024-06-15T22:44:35.483Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0/adminSdkConfig {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2024-06-15T22:44:35.483Z] Failed to get Admin SDK config for sucmanh2000-2b5f0, falling back to cache Failed to get Admin SDK for Firebase project sucmanh2000-2b5f0. Please make sure the project exists and your account has permission to access it. {"name":"FirebaseError","children":[],"exit":2,"message":"Failed to get Admin SDK for Firebase project sucmanh2000-2b5f0. Please make sure the project exists and your account has permission to access it.","original":{"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, The caller does not have permission","status":403},"status":500}
[warn] ⚠  firestore: Cloud Firestore rules file /Users/hacthe/project/sucmanh2000/firestore.rules specified in firebase.json does not exist. {"metadata":{"emulator":{"name":"firestore"},"message":"Cloud Firestore rules file \u001b[1m/Users/hacthe/project/sucmanh2000/firestore.rules\u001b[22m specified in firebase.json does not exist."}}
[warn] ⚠  firestore: The emulator will default to allowing all reads and writes. Learn more about this option: https://firebase.google.com/docs/emulator-suite/install_and_configure#security_rules_configuration. {"metadata":{"emulator":{"name":"firestore"},"message":"The emulator will default to allowing all reads and writes. Learn more about this option: https://firebase.google.com/docs/emulator-suite/install_and_configure#security_rules_configuration."}}
[debug] [2024-06-15T22:44:35.488Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-06-15T22:44:35.488Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2024-06-15T22:44:35.488Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","/Users/hacthe/.cache/firebase/emulators/cloud-firestore-emulator-v1.18.2.jar","--host","127.0.0.1","--port",4002,"--websocket_port",9151,"--project_id","sucmanh2000-2b5f0","--single_project_mode",true,"--functions_emulator","127.0.0.1:4003"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"/Users/hacthe/.cache/firebase/emulators/cloud-firestore-emulator-v1.18.2.jar\",\"--host\",\"127.0.0.1\",\"--port\",4002,\"--websocket_port\",9151,\"--project_id\",\"sucmanh2000-2b5f0\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:4003\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[debug] [2024-06-15T22:44:36.841Z] Jun 16, 2024 5:44:36 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start
INFO: Started WebSocket server on ws://127.0.0.1:9151
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 5:44:36 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start\nINFO: Started WebSocket server on ws://127.0.0.1:9151\n"}}
[debug] [2024-06-15T22:44:36.869Z] API endpoint: http:// {"metadata":{"emulator":{"name":"firestore"},"message":"API endpoint: http://"}}
[debug] [2024-06-15T22:44:36.869Z] 127.0.0.1:4002
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=127.0.0.1:4002

Dev App Server is now running.

 {"metadata":{"emulator":{"name":"firestore"},"message":"127.0.0.1:4002\nIf you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:\n\n   export FIRESTORE_EMULATOR_HOST=127.0.0.1:4002\n\nDev App Server is now running.\n\n"}}
[info] ✔  firestore: Firestore Emulator UI websocket is running on 9151. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9151."}}
[debug] [2024-06-15T22:44:39.965Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0/sites 
[debug] [2024-06-15T22:44:40.728Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0/sites 403
[debug] [2024-06-15T22:44:40.728Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0/sites {"error":{"code":403,"message":"Permission 'firebasehosting.sites.get' denied on resource 'projects/sucmanh2000-2b5f0' (or it may not exist)","status":"PERMISSION_DENIED"}}
[debug] [2024-06-15T22:44:40.728Z] Failed to list hosting sites
[debug] HTTP Error: 403, Permission 'firebasehosting.sites.get' denied on resource 'projects/sucmanh2000-2b5f0' (or it may not exist)
[debug] [2024-06-15T22:44:40.729Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0/webApps/-/config [none]
[debug] [2024-06-15T22:44:41.145Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0/webApps/-/config 403
[debug] [2024-06-15T22:44:41.145Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0/webApps/-/config {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2024-06-15T22:44:41.145Z] fetchWebSetup error: FirebaseError: HTTP Error: 403, The caller does not have permission
[warn] ⚠  hosting: Authentication error when trying to fetch your current web app configuration, have you run firebase login? 
[warn] ⚠  hosting: Could not fetch web app configuration and there is no cached configuration on this machine. Check your internet connection and make sure you are authenticated. To continue, you must call firebase.initializeApp({...}) in your code before using Firebase. 
[debug] [2024-06-15T22:44:41.147Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0 [none]
[debug] [2024-06-15T22:44:41.638Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0 403
[debug] [2024-06-15T22:44:41.638Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/sucmanh2000-2b5f0 {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2024-06-15T22:44:41.638Z] HTTP Error: 403, The caller does not have permission
[debug] [2024-06-15T22:44:41.639Z] Specified "public" directory "admin/dist" does not exist; Deploy to Hosting site "admin-ec04c" may fail or be empty.
[info] i  hosting[savvy-serenity-424116-g1]: Serving hosting files from: client/build {"metadata":{"emulator":{"name":"hosting"},"message":"Serving hosting files from: \u001b[1mclient/build\u001b[22m"}}
[info] ✔  hosting[savvy-serenity-424116-g1]: Local server: http://127.0.0.1:4004 {"metadata":{"emulator":{"name":"hosting"},"message":"Local server: \u001b[4m\u001b[1mhttp://127.0.0.1:4004\u001b[22m\u001b[24m"}}
[info] i  hosting[admin-ec04c]: Serving hosting files from: admin/dist {"metadata":{"emulator":{"name":"hosting"},"message":"Serving hosting files from: \u001b[1madmin/dist\u001b[22m"}}
[info] ✔  hosting[admin-ec04c]: Local server: http://127.0.0.1:4009 {"metadata":{"emulator":{"name":"hosting"},"message":"Local server: \u001b[4m\u001b[1mhttp://127.0.0.1:4009\u001b[22m\u001b[24m"}}
[debug] [2024-06-15T22:44:41.777Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-06-15T22:44:41.777Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2024-06-15T22:44:41.777Z] Starting Emulator UI with command {"binary":"node","args":["/Users/hacthe/.cache/firebase/emulators/ui-v1.11.7/server/server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"/Users/hacthe/.cache/firebase/emulators/ui-v1.11.7/server/server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2024-06-15T22:44:41.840Z] Web / API server started at 127.0.0.1:4005
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4005\n"}}
[debug] [2024-06-15T22:44:41.840Z] Web / API server started at ::1:4005
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4005\n"}}
[info] i  functions: Watching "/Users/hacthe/project/sucmanh2000/server" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/hacthe/project/sucmanh2000/server\" for Cloud Functions..."}}
[debug] [2024-06-15T22:44:42.039Z] Validating nodejs source
[debug] [2024-06-15T22:44:42.692Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:44:42.692Z] Building nodejs source
[debug] [2024-06-15T22:44:42.692Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:44:42.696Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:44:42.703Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T22:44:42.733Z] Jun 16, 2024 5:44:42 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 5:44:42 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[info] Serving at port 8666

[debug] [2024-06-15T22:44:43.161Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T22:44:47.797Z] Jun 16, 2024 5:44:47 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 5:44:47 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[info] ✔  functions[asia-southeast1-app]: http function initialized (http://127.0.0.1:4003/sucmanh2000-2b5f0/asia-southeast1/app). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:4003/sucmanh2000-2b5f0/asia-southeast1/app)."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4005/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬─────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI             │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Authentication │ 127.0.0.1:4001 │ http://127.0.0.1:4005/auth      │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Functions      │ 127.0.0.1:4003 │ http://127.0.0.1:4005/functions │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Firestore      │ 127.0.0.1:4002 │ http://127.0.0.1:4005/firestore │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Hosting        │ 127.0.0.1:4004 │ n/a                             │
└────────────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9151, 4009

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2024-06-15T22:52:02.892Z] Jun 16, 2024 5:52:02 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 5:52:02 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2024-06-15T22:52:03.217Z] Jun 16, 2024 5:52:03 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 5:52:03 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2024-06-15T22:52:14.215Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app-2024-06-15T22:52:14.214Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:52:14.215Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app-2024-06-15T22:52:14.214Z"],"workRunningCount":1}
[debug] [2024-06-15T22:52:14.216Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app --> asia-southeast1-app
[debug] [2024-06-15T22:52:14.219Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:52:14.219Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app, mapping to path=/"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:52:14.224Z] [worker-pool] addWorker(asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(asia-southeast1-app)"}}
[debug] [2024-06-15T22:52:14.224Z] [worker-pool] Adding worker with key asia-southeast1-app, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key asia-southeast1-app, total=1"}}
[debug] [2024-06-15T22:52:14.920Z] [runtime-status] [37418] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T22:52:14.920Z] [runtime-status] [37418] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:52:14.920Z] [runtime-status] [37418] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T22:52:14.921Z] [runtime-status] [37418] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:52:15.051Z] [runtime-status] [37418] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T22:52:15.051Z] [runtime-status] [37418] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T22:52:15.051Z] [runtime-status] [37418] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:52:15.052Z] [runtime-status] [37418] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T22:52:15.053Z] [runtime-status] [37418] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:52:15.053Z] [runtime-status] [37418] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T22:52:15.130Z] [runtime-status] [37418] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[warn] ⚠  functions: The Firebase Storage emulator is not running, so calls to Firebase Storage will affect production. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"The Firebase Storage emulator is not running, so calls to Firebase Storage will affect production."}}
[debug] [2024-06-15T22:52:15.243Z] [runtime-status] [37418] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T22:52:15.244Z] [runtime-status] [37418] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_d2f36a204290eb98.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37418] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_d2f36a204290eb98.sock"}}
[debug] [2024-06-15T22:52:15.339Z] [worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: IDLE"}}
[debug] [2024-06-15T22:52:15.339Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:52:15.340Z] [worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: BUSY"}}
[debug] [2024-06-15T22:52:15.343Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 3.075709ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 3.075709ms"}}
[debug] [2024-06-15T22:52:15.343Z] [worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: IDLE"}}
[debug] [2024-06-15T22:52:15.343Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:52:15.343Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:52:15.343Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:52:17.884Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/haha-2024-06-15T22:52:17.884Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:52:17.885Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/haha-2024-06-15T22:52:17.884Z"],"workRunningCount":1}
[debug] [2024-06-15T22:52:17.885Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/haha --> asia-southeast1-app
[debug] [2024-06-15T22:52:17.888Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:52:17.888Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/haha, mapping to path=/haha {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/haha, mapping to path=/haha"}}
[debug] [2024-06-15T22:52:17.889Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:52:17.889Z] [worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: BUSY"}}
[debug] [2024-06-15T22:52:18.024Z] Jun 16, 2024 5:52:18 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 5:52:18 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2024-06-15T22:52:18.150Z] Multiple projectIds are not recommended in single project mode. Requested project ID savvy-serenity-424116-g1, but the emulator is configured for sucmanh2000-2b5f0. To opt-out of single project mode add/set the '"singleProjectMode": false' property in the firebase.json emulators config.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Multiple projectIds are not recommended in single project mode. Requested project ID savvy-serenity-424116-g1, but the emulator is configured for sucmanh2000-2b5f0. To opt-out of single project mode add/set the '\"singleProjectMode\": false' property in the firebase.json emulators config.\n"}}
[debug] [2024-06-15T22:52:18.729Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 840.364333ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 840.364333ms"}}
[debug] [2024-06-15T22:52:18.729Z] [worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: IDLE"}}
[debug] [2024-06-15T22:52:18.729Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:52:18.729Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:52:18.730Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:52:18.799Z] Functions emulator received unknown request at path /favicon.ico
[debug] [2024-06-15T22:52:28.604Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:52:28.604Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:52:28.604Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:52:28.604Z"],"workRunningCount":1}
[debug] [2024-06-15T22:52:28.604Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch --> asia-southeast1-app
[debug] [2024-06-15T22:52:28.606Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:52:28.607Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch, mapping to path=/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch, mapping to path=/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch"}}
[debug] [2024-06-15T22:52:28.607Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:52:28.607Z] [worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: BUSY"}}
[info] >  { keyword: 'chien dich', limit: undefined } {"user":"{ keyword: 'chien dich', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: 'chien dich', limit: undefined }"}}
[info] >  Failed to fetch counts: ReplyError: ERR unknown command 'FT.SEARCH', with args beginning with: 'cleanName' '@cleanName:chien dich*' 'LIMIT' '0' '20'  {"user":"Failed to fetch counts: ReplyError: ERR unknown command 'FT.SEARCH', with args beginning with: 'cleanName' '@cleanName:chien dich*' 'LIMIT' '0' '20' ","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m Failed to fetch counts: ReplyError: ERR unknown command 'FT.SEARCH', with args beginning with: 'cleanName' '@cleanName:chien dich*' 'LIMIT' '0' '20' "}}
[info] >      at parseError (/Users/hacthe/project/sucmanh2000/server/node_modules/redis-parser/lib/parser.js:179:12) {"user":"    at parseError (/Users/hacthe/project/sucmanh2000/server/node_modules/redis-parser/lib/parser.js:179:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m     at parseError (/Users/hacthe/project/sucmanh2000/server/node_modules/redis-parser/lib/parser.js:179:12)"}}
[info] >      at parseType (/Users/hacthe/project/sucmanh2000/server/node_modules/redis-parser/lib/parser.js:302:14) { {"user":"    at parseType (/Users/hacthe/project/sucmanh2000/server/node_modules/redis-parser/lib/parser.js:302:14) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m     at parseType (/Users/hacthe/project/sucmanh2000/server/node_modules/redis-parser/lib/parser.js:302:14) {"}}
[info] >    command: { {"user":"  command: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m   command: {"}}
[info] >      name: 'FT.SEARCH', {"user":"    name: 'FT.SEARCH',","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'FT.SEARCH',"}}
[info] >      args: [ 'cleanName', '@cleanName:chien dich*', 'LIMIT', '0', '20' ] {"user":"    args: [ 'cleanName', '@cleanName:chien dich*', 'LIMIT', '0', '20' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m     args: [ 'cleanName', '@cleanName:chien dich*', 'LIMIT', '0', '20' ]"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T22:52:28.614Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 7.060708ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 7.060708ms"}}
[debug] [2024-06-15T22:52:28.614Z] [worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: IDLE"}}
[debug] [2024-06-15T22:52:28.614Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:52:28.614Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:52:28.615Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:54:03.036Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:54:03.540Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:54:04.446Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:54:05.451Z] Validating nodejs source
[debug] [2024-06-15T22:54:06.747Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:54:06.747Z] Building nodejs source
[debug] [2024-06-15T22:54:06.747Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:54:06.749Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:54:06.750Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8238

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T22:54:07.166Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[debug] [2024-06-15T22:54:17.176Z] [worker-pool] Shutting down IDLE worker (asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (asia-southeast1-app)"}}
[debug] [2024-06-15T22:54:17.176Z] [worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: FINISHING"}}
[debug] [2024-06-15T22:54:17.186Z] [worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: exited"}}
[debug] [2024-06-15T22:54:17.186Z] [worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-b51690be-0206-4ce5-8c86-c55639a28d32]: FINISHED"}}
[debug] [2024-06-15T22:54:43.647Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:54:44.648Z] Validating nodejs source
[debug] [2024-06-15T22:54:45.218Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:54:45.218Z] Building nodejs source
[debug] [2024-06-15T22:54:45.218Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:54:45.219Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:54:45.220Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8722

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T22:54:45.572Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T22:54:53.881Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:54:54.883Z] Validating nodejs source
[debug] [2024-06-15T22:54:55.515Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:54:55.515Z] Building nodejs source
[debug] [2024-06-15T22:54:55.515Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:54:55.518Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:54:55.518Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[info] Serving at port 8896

[error] /Users/hacthe/project/sucmanh2000/server/services/redis.js:3
setTimeout(())
            ^

SyntaxError: Unexpected token ')'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/routes/search.js:4:31)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2024-06-15T22:54:55.887Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token ')'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T22:54:59.005Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:55:00.008Z] Validating nodejs source
[debug] [2024-06-15T22:55:00.579Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:55:00.579Z] Building nodejs source
[debug] [2024-06-15T22:55:00.579Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:55:00.580Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:55:00.580Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8374

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T22:55:00.836Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T22:55:05.560Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:55:06.563Z] Validating nodejs source
[debug] [2024-06-15T22:55:07.174Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:55:07.174Z] Building nodejs source
[debug] [2024-06-15T22:55:07.174Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:55:07.175Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:55:07.176Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8039

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T22:55:07.433Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[debug] [2024-06-15T22:55:11.181Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:55:12.181Z] Validating nodejs source
[debug] [2024-06-15T22:55:12.700Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:55:12.700Z] Building nodejs source
[debug] [2024-06-15T22:55:12.700Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:55:12.701Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:55:12.701Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8100

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T22:55:12.969Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[debug] [2024-06-15T22:55:20.493Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:55:21.495Z] Validating nodejs source
[debug] [2024-06-15T22:55:22.111Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:55:22.111Z] Building nodejs source
[debug] [2024-06-15T22:55:22.111Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:55:22.113Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:55:22.113Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8409

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T22:55:22.400Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[debug] [2024-06-15T22:55:29.807Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:55:29.807Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:55:29.808Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:55:29.807Z"],"workRunningCount":1}
[debug] [2024-06-15T22:55:29.808Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch --> asia-southeast1-app
[debug] [2024-06-15T22:55:29.811Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:55:29.812Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch, mapping to path=/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch, mapping to path=/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch"}}
[debug] [2024-06-15T22:55:29.812Z] [worker-pool] Cleaned up workers for asia-southeast1-app: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for asia-southeast1-app: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:55:29.814Z] [worker-pool] addWorker(asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(asia-southeast1-app)"}}
[debug] [2024-06-15T22:55:29.815Z] [worker-pool] Adding worker with key asia-southeast1-app, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key asia-southeast1-app, total=1"}}
[debug] [2024-06-15T22:55:30.528Z] [runtime-status] [37808] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T22:55:30.528Z] [runtime-status] [37808] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:55:30.528Z] [runtime-status] [37808] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T22:55:30.529Z] [runtime-status] [37808] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:55:30.599Z] [runtime-status] [37808] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T22:55:30.599Z] [runtime-status] [37808] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T22:55:30.599Z] [runtime-status] [37808] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:55:30.600Z] [runtime-status] [37808] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T22:55:30.601Z] [runtime-status] [37808] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:55:30.601Z] [runtime-status] [37808] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T22:55:30.644Z] [runtime-status] [37808] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T22:55:30.733Z] [runtime-status] [37808] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T22:55:30.735Z] [runtime-status] [37808] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_827136d6da11c7b8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37808] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_827136d6da11c7b8.sock"}}
[debug] [2024-06-15T22:55:30.831Z] [worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: IDLE"}}
[debug] [2024-06-15T22:55:30.832Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:55:30.832Z] [worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: BUSY"}}
[info] >  { keyword: 'chien dich', limit: undefined } {"user":"{ keyword: 'chien dich', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: 'chien dich', limit: undefined }"}}
[debug] [2024-06-15T22:55:31.037Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 204.99075ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 204.99075ms"}}
[debug] [2024-06-15T22:55:31.037Z] [worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: IDLE"}}
[debug] [2024-06-15T22:55:31.037Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:55:31.038Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:55:31.038Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[debug] [2024-06-15T22:55:32.411Z] [worker-pool] Shutting down IDLE worker (asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (asia-southeast1-app)"}}
[debug] [2024-06-15T22:55:32.411Z] [worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: FINISHING"}}
[debug] [2024-06-15T22:55:32.415Z] [worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: exited"}}
[debug] [2024-06-15T22:55:32.415Z] [worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-34a992d8-adce-4507-b6e4-20cc6707d5ab]: FINISHED"}}
[debug] [2024-06-15T22:55:36.474Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:55:36.474Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:55:36.474Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:55:36.474Z"],"workRunningCount":1}
[debug] [2024-06-15T22:55:36.474Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=ai%20mua --> asia-southeast1-app
[debug] [2024-06-15T22:55:36.475Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:55:36.475Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=ai%20mua, mapping to path=/search?q=ai%20mua {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=ai%20mua, mapping to path=/search?q=ai%20mua"}}
[debug] [2024-06-15T22:55:36.476Z] [worker-pool] Cleaned up workers for asia-southeast1-app: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for asia-southeast1-app: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:55:36.477Z] [worker-pool] addWorker(asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(asia-southeast1-app)"}}
[debug] [2024-06-15T22:55:36.478Z] [worker-pool] Adding worker with key asia-southeast1-app, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key asia-southeast1-app, total=1"}}
[debug] [2024-06-15T22:55:36.826Z] [runtime-status] [37819] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T22:55:36.827Z] [runtime-status] [37819] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:55:36.827Z] [runtime-status] [37819] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T22:55:36.827Z] [runtime-status] [37819] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:55:36.897Z] [runtime-status] [37819] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T22:55:36.897Z] [runtime-status] [37819] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T22:55:36.897Z] [runtime-status] [37819] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:55:36.897Z] [runtime-status] [37819] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T22:55:36.898Z] [runtime-status] [37819] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:55:36.898Z] [runtime-status] [37819] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T22:55:36.939Z] [runtime-status] [37819] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T22:55:37.008Z] [runtime-status] [37819] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T22:55:37.009Z] [runtime-status] [37819] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_f38190a7eed44172.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [37819] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_f38190a7eed44172.sock"}}
[debug] [2024-06-15T22:55:37.089Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE"}}
[debug] [2024-06-15T22:55:37.089Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:55:37.089Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY"}}
[info] >  { keyword: 'ai mua', limit: undefined } {"user":"{ keyword: 'ai mua', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: 'ai mua', limit: undefined }"}}
[debug] [2024-06-15T22:55:37.285Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 196.445333ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 196.445333ms"}}
[debug] [2024-06-15T22:55:37.286Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE"}}
[debug] [2024-06-15T22:55:37.286Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:55:37.286Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:55:37.287Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:55:44.815Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:55:44.815Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:55:44.816Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:55:44.815Z"],"workRunningCount":1}
[debug] [2024-06-15T22:55:44.816Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=2024 --> asia-southeast1-app
[debug] [2024-06-15T22:55:44.819Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:55:44.819Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=2024, mapping to path=/search?q=2024 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=2024, mapping to path=/search?q=2024"}}
[debug] [2024-06-15T22:55:44.820Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:55:44.820Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY"}}
[info] >  { keyword: '2024', limit: undefined } {"user":"{ keyword: '2024', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: '2024', limit: undefined }"}}
[debug] [2024-06-15T22:55:44.915Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 95.653667ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 95.653667ms"}}
[debug] [2024-06-15T22:55:44.916Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE"}}
[debug] [2024-06-15T22:55:44.916Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:55:44.916Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:55:44.917Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:55:59.280Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:55:59.280Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:55:59.281Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:55:59.280Z"],"workRunningCount":1}
[debug] [2024-06-15T22:55:59.281Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch --> asia-southeast1-app
[debug] [2024-06-15T22:55:59.284Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:55:59.284Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch, mapping to path=/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch, mapping to path=/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch"}}
[debug] [2024-06-15T22:55:59.285Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:55:59.285Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY"}}
[info] >  { keyword: 'chien dich', limit: undefined } {"user":"{ keyword: 'chien dich', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: 'chien dich', limit: undefined }"}}
[debug] [2024-06-15T22:55:59.380Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 95.0305ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 95.0305ms"}}
[debug] [2024-06-15T22:55:59.381Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE"}}
[debug] [2024-06-15T22:55:59.381Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:55:59.381Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:55:59.381Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:56:16.010Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:56:16.010Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:56:16.010Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:56:16.010Z"],"workRunningCount":1}
[debug] [2024-06-15T22:56:16.010Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch --> asia-southeast1-app
[debug] [2024-06-15T22:56:16.012Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:56:16.013Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch, mapping to path=/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch, mapping to path=/search?q=chi%E1%BA%BFn%20d%E1%BB%8Bch"}}
[debug] [2024-06-15T22:56:16.013Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:56:16.013Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY"}}
[info] >  { keyword: 'chien dich', limit: undefined } {"user":"{ keyword: 'chien dich', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: 'chien dich', limit: undefined }"}}
[debug] [2024-06-15T22:56:16.106Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 93.80275ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 93.80275ms"}}
[debug] [2024-06-15T22:56:16.107Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE"}}
[debug] [2024-06-15T22:56:16.107Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:56:16.108Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:56:16.108Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:56:19.665Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:56:19.665Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:56:19.665Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:56:19.665Z"],"workRunningCount":1}
[debug] [2024-06-15T22:56:19.665Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=chuong%20trinh --> asia-southeast1-app
[debug] [2024-06-15T22:56:19.666Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:56:19.666Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=chuong%20trinh, mapping to path=/search?q=chuong%20trinh {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=chuong%20trinh, mapping to path=/search?q=chuong%20trinh"}}
[debug] [2024-06-15T22:56:19.667Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:56:19.667Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY"}}
[info] >  { keyword: 'chuong trinh', limit: undefined } {"user":"{ keyword: 'chuong trinh', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: 'chuong trinh', limit: undefined }"}}
[debug] [2024-06-15T22:56:19.762Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 95.508875ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 95.508875ms"}}
[debug] [2024-06-15T22:56:19.763Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE"}}
[debug] [2024-06-15T22:56:19.763Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:56:19.763Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:56:19.763Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:56:30.857Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:56:30.857Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:56:30.857Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:56:30.857Z"],"workRunningCount":1}
[debug] [2024-06-15T22:56:30.857Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=AI%20MU%E1%BB%90N%20T%E1%BB%9A%20L%C3%80M%20TI%E1%BA%BEP%20M%E1%BA%A4Y%20CH%C6%AF%C6%A0NG --> asia-southeast1-app
[debug] [2024-06-15T22:56:30.861Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:56:30.861Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=AI%20MU%E1%BB%90N%20T%E1%BB%9A%20L%C3%80M%20TI%E1%BA%BEP%20M%E1%BA%A4Y%20CH%C6%AF%C6%A0NG, mapping to path=/search?q=AI%20MU%E1%BB%90N%20T%E1%BB%9A%20L%C3%80M%20TI%E1%BA%BEP%20M%E1%BA%A4Y%20CH%C6%AF%C6%A0NG {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=AI%20MU%E1%BB%90N%20T%E1%BB%9A%20L%C3%80M%20TI%E1%BA%BEP%20M%E1%BA%A4Y%20CH%C6%AF%C6%A0NG, mapping to path=/search?q=AI%20MU%E1%BB%90N%20T%E1%BB%9A%20L%C3%80M%20TI%E1%BA%BEP%20M%E1%BA%A4Y%20CH%C6%AF%C6%A0NG"}}
[debug] [2024-06-15T22:56:30.862Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:56:30.862Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY"}}
[info] >  { keyword: 'ai muon to lam tiep may chuong', limit: undefined } {"user":"{ keyword: 'ai muon to lam tiep may chuong', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: 'ai muon to lam tiep may chuong', limit: undefined }"}}
[debug] [2024-06-15T22:56:30.956Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 94.699833ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 94.699833ms"}}
[debug] [2024-06-15T22:56:30.957Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE"}}
[debug] [2024-06-15T22:56:30.958Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:56:30.958Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:56:30.958Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:57:49.506Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:57:49.505Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:57:49.507Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:57:49.505Z"],"workRunningCount":1}
[debug] [2024-06-15T22:57:49.507Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh --> asia-southeast1-app
[debug] [2024-06-15T22:57:49.510Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:57:49.511Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh, mapping to path=/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh, mapping to path=/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh"}}
[debug] [2024-06-15T22:57:49.511Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:57:49.511Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: BUSY"}}
[info] >  { keyword: 'chuong trinh', limit: undefined } {"user":"{ keyword: 'chuong trinh', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: 'chuong trinh', limit: undefined }"}}
[debug] [2024-06-15T22:57:49.608Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 96.748ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 96.748ms"}}
[debug] [2024-06-15T22:57:49.608Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: IDLE"}}
[debug] [2024-06-15T22:57:49.609Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:57:49.609Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:57:49.609Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:58:55.448Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:58:56.456Z] Validating nodejs source
[debug] [2024-06-15T22:58:57.148Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:58:57.148Z] Building nodejs source
[debug] [2024-06-15T22:58:57.148Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:58:57.151Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:58:57.152Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8375

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T22:58:57.665Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[debug] [2024-06-15T22:59:07.674Z] [worker-pool] Shutting down IDLE worker (asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (asia-southeast1-app)"}}
[debug] [2024-06-15T22:59:07.674Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: FINISHING"}}
[debug] [2024-06-15T22:59:07.681Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: exited"}}
[debug] [2024-06-15T22:59:07.681Z] [worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-0d2630dc-888d-4608-b09b-7a0ccd8e68ac]: FINISHED"}}
[debug] [2024-06-15T22:59:30.156Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:59:31.158Z] Validating nodejs source
[debug] [2024-06-15T22:59:32.392Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:59:32.392Z] Building nodejs source
[debug] [2024-06-15T22:59:32.393Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:59:32.394Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:59:32.395Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8813

[error] /Users/hacthe/project/sucmanh2000/server/services/redis.js:35
  const {}
        ^^

SyntaxError: Missing initializer in destructuring declaration
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/routes/search.js:4:31)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2024-06-15T22:59:32.795Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Missing initializer in destructuring declaration
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T22:59:34.844Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:59:35.846Z] Validating nodejs source
[debug] [2024-06-15T22:59:36.416Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:59:36.416Z] Building nodejs source
[debug] [2024-06-15T22:59:36.416Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:59:36.417Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:59:36.417Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8711

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T22:59:36.712Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T22:59:36.942Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T22:59:37.943Z] Validating nodejs source
[debug] [2024-06-15T22:59:38.420Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T22:59:38.420Z] Building nodejs source
[debug] [2024-06-15T22:59:38.420Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:59:38.421Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T22:59:38.421Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8726

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T22:59:38.665Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T22:59:43.553Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:59:43.553Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T22:59:43.553Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T22:59:43.553Z"],"workRunningCount":1}
[debug] [2024-06-15T22:59:43.553Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh --> asia-southeast1-app
[debug] [2024-06-15T22:59:43.555Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T22:59:43.555Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh, mapping to path=/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh, mapping to path=/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh"}}
[debug] [2024-06-15T22:59:43.555Z] [worker-pool] Cleaned up workers for asia-southeast1-app: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for asia-southeast1-app: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T22:59:43.557Z] [worker-pool] addWorker(asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(asia-southeast1-app)"}}
[debug] [2024-06-15T22:59:43.557Z] [worker-pool] Adding worker with key asia-southeast1-app, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key asia-southeast1-app, total=1"}}
[debug] [2024-06-15T22:59:44.285Z] [runtime-status] [38214] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T22:59:44.286Z] [runtime-status] [38214] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:59:44.286Z] [runtime-status] [38214] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T22:59:44.286Z] [runtime-status] [38214] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:59:44.357Z] [runtime-status] [38214] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T22:59:44.357Z] [runtime-status] [38214] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T22:59:44.357Z] [runtime-status] [38214] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:59:44.357Z] [runtime-status] [38214] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T22:59:44.358Z] [runtime-status] [38214] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T22:59:44.358Z] [runtime-status] [38214] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T22:59:44.402Z] [runtime-status] [38214] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T22:59:44.473Z] [runtime-status] [38214] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T22:59:44.475Z] [runtime-status] [38214] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_58a0a6dbe9065264.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38214] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_58a0a6dbe9065264.sock"}}
[debug] [2024-06-15T22:59:44.573Z] [worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: IDLE"}}
[debug] [2024-06-15T22:59:44.573Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T22:59:44.574Z] [worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: BUSY"}}
[info] >  { keyword: 'chuong trinh', limit: undefined } {"user":"{ keyword: 'chuong trinh', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: 'chuong trinh', limit: undefined }"}}
[debug] [2024-06-15T22:59:44.741Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 167.266458ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 167.266458ms"}}
[debug] [2024-06-15T22:59:44.741Z] [worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: IDLE"}}
[debug] [2024-06-15T22:59:44.741Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T22:59:44.742Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T22:59:44.742Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[debug] [2024-06-15T22:59:46.726Z] [worker-pool] Shutting down IDLE worker (asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (asia-southeast1-app)"}}
[debug] [2024-06-15T22:59:46.726Z] [worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: FINISHING"}}
[debug] [2024-06-15T22:59:46.734Z] [worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: exited"}}
[debug] [2024-06-15T22:59:46.734Z] [worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-eafa7b97-3f8b-4e01-a131-9ae855a82b98]: FINISHED"}}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[debug] [2024-06-15T23:00:18.592Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T23:00:19.595Z] Validating nodejs source
[debug] [2024-06-15T23:00:20.242Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:00:20.242Z] Building nodejs source
[debug] [2024-06-15T23:00:20.242Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:00:20.245Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:00:20.246Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8005

[debug] [2024-06-15T23:00:20.637Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:00:20.693Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:00:21.638Z] Validating nodejs source
[debug] [2024-06-15T23:00:22.173Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:00:22.173Z] Building nodejs source
[debug] [2024-06-15T23:00:22.173Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:00:22.174Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:00:22.175Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T23:00:22.176Z] [work-queue] {"queuedWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T23:00:22.176Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:00:22.176Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/sucmanh2000-2b5f0/asia-southeast1/app/search-2024-06-15T23:00:22.176Z"],"workRunningCount":1}
[debug] [2024-06-15T23:00:22.176Z] Accepted request GET /sucmanh2000-2b5f0/asia-southeast1/app/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh --> asia-southeast1-app
[debug] [2024-06-15T23:00:22.178Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T23:00:22.178Z] [functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh, mapping to path=/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/sucmanh2000-2b5f0/asia-southeast1/app/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh, mapping to path=/search?q=ch%C6%B0%C6%A1ng%20tr%C3%ACnh"}}
[debug] [2024-06-15T23:00:22.178Z] [worker-pool] Cleaned up workers for asia-southeast1-app: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for asia-southeast1-app: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:00:22.179Z] [worker-pool] addWorker(asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(asia-southeast1-app)"}}
[debug] [2024-06-15T23:00:22.179Z] [worker-pool] Adding worker with key asia-southeast1-app, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key asia-southeast1-app, total=1"}}
[info] Serving at port 8371

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:00:22.478Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:00:22.890Z] [runtime-status] [38304] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:00:22.890Z] [runtime-status] [38304] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:00:22.890Z] [runtime-status] [38304] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T23:00:22.891Z] [runtime-status] [38304] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:00:22.960Z] [runtime-status] [38304] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T23:00:22.960Z] [runtime-status] [38304] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T23:00:22.960Z] [runtime-status] [38304] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:00:22.961Z] [runtime-status] [38304] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:00:22.962Z] [runtime-status] [38304] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:00:22.962Z] [runtime-status] [38304] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T23:00:23.005Z] [runtime-status] [38304] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:00:23.072Z] [runtime-status] [38304] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T23:00:23.075Z] [runtime-status] [38304] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_a4721b71ff202d5e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[runtime-status] [38304] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_a4721b71ff202d5e.sock"}}
[debug] [2024-06-15T23:00:23.112Z] [worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: IDLE"}}
[debug] [2024-06-15T23:00:23.112Z] [worker-pool] submitRequest(triggerId=asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=asia-southeast1-app)"}}
[info] i  functions: Beginning execution of "asia-southeast1-app" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Beginning execution of \"asia-southeast1-app\""}}
[debug] [2024-06-15T23:00:23.112Z] [worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: BUSY"}}
[info] >  { keyword: 'chuong trinh', limit: undefined } {"user":"{ keyword: 'chuong trinh', limit: undefined }","metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"\u001b[90m> \u001b[39m { keyword: 'chuong trinh', limit: undefined }"}}
[debug] [2024-06-15T23:00:23.351Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "asia-southeast1-app" in 239.009666ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finished \"asia-southeast1-app\" in 239.009666ms"}}
[debug] [2024-06-15T23:00:23.351Z] [worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: IDLE"}}
[debug] [2024-06-15T23:00:23.351Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T23:00:23.351Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T23:00:23.351Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[debug] [2024-06-15T23:00:30.710Z] [worker-pool] Shutting down IDLE worker (asia-southeast1-app) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (asia-southeast1-app)"}}
[debug] [2024-06-15T23:00:30.710Z] [worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: FINISHING"}}
[debug] [2024-06-15T23:00:30.718Z] [worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: exited"}}
[debug] [2024-06-15T23:00:30.718Z] [worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"asia-southeast1-app"},"extension":{},"message":"[worker-asia-southeast1-app-6f56e0d1-3f48-4ec4-9e8a-e24f939057fc]: FINISHED"}}
[info] ✔  functions: Loaded functions definitions from source: app. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app."}}
[debug] [2024-06-15T23:00:50.162Z] File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers"}}
[debug] [2024-06-15T23:00:51.167Z] Validating nodejs source
[debug] [2024-06-15T23:00:51.792Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:00:51.792Z] Building nodejs source
[debug] [2024-06-15T23:00:51.792Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:00:51.794Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:00:51.795Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8744

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:00:51.917Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:09.777Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:10.779Z] Validating nodejs source
[debug] [2024-06-15T23:01:11.393Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:11.393Z] Building nodejs source
[debug] [2024-06-15T23:01:11.393Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:11.394Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:11.394Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8377

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:11.520Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:13.380Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:14.381Z] Validating nodejs source
[debug] [2024-06-15T23:01:14.943Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:14.943Z] Building nodejs source
[debug] [2024-06-15T23:01:14.943Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:14.944Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:14.944Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8639

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:15.040Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:19.632Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:20.634Z] Validating nodejs source
[debug] [2024-06-15T23:01:21.192Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:21.192Z] Building nodejs source
[debug] [2024-06-15T23:01:21.192Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:21.192Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:21.193Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:21.193Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8125

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:21.307Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:22.194Z] Validating nodejs source
[debug] [2024-06-15T23:01:22.756Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:22.756Z] Building nodejs source
[debug] [2024-06-15T23:01:22.756Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:22.757Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:22.757Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8150

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:22.867Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:23.134Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:24.136Z] Validating nodejs source
[debug] [2024-06-15T23:01:24.698Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:24.698Z] Building nodejs source
[debug] [2024-06-15T23:01:24.698Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:24.698Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:24.699Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8933

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:24.788Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:25.225Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:26.225Z] Validating nodejs source
[debug] [2024-06-15T23:01:26.777Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:26.777Z] Building nodejs source
[debug] [2024-06-15T23:01:26.777Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:26.778Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:26.778Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8082

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:26.984Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:27.410Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:28.412Z] Validating nodejs source
[debug] [2024-06-15T23:01:28.930Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:28.930Z] Building nodejs source
[debug] [2024-06-15T23:01:28.930Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:28.931Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:28.931Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8762

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:29.051Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:30.342Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:31.344Z] Validating nodejs source
[debug] [2024-06-15T23:01:31.895Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:31.896Z] Building nodejs source
[debug] [2024-06-15T23:01:31.896Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:31.896Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:31.896Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8832

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:31.983Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:32.164Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:33.167Z] Validating nodejs source
[debug] [2024-06-15T23:01:33.731Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:33.731Z] Building nodejs source
[debug] [2024-06-15T23:01:33.731Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:33.731Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:33.732Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8747

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:33.842Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:39.457Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:40.459Z] Validating nodejs source
[debug] [2024-06-15T23:01:41.032Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:41.032Z] Building nodejs source
[debug] [2024-06-15T23:01:41.032Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:41.033Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:41.034Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T23:01:41.094Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] Serving at port 8654

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:41.139Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:41.191Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:42.193Z] Validating nodejs source
[debug] [2024-06-15T23:01:42.722Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:42.722Z] Building nodejs source
[debug] [2024-06-15T23:01:42.722Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:42.723Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:42.724Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8772

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:42.816Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:50.108Z] File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:51.110Z] Validating nodejs source
[debug] [2024-06-15T23:01:51.625Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:51.625Z] Building nodejs source
[debug] [2024-06-15T23:01:51.625Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:51.626Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:51.626Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8688

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.postTriggerToUpdateRedisDb = 
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:51.732Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:51.763Z] File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:52.765Z] Validating nodejs source
[debug] [2024-06-15T23:01:53.290Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:53.290Z] Building nodejs source
[debug] [2024-06-15T23:01:53.290Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:53.291Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:53.292Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8534

[error] /Users/hacthe/project/sucmanh2000/server/index.js:21
  export.postTriggerToUpdateRedisDb = postTriggerToUpdateRedisDb;
  ^^^^^^

SyntaxError: Unexpected token 'export'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:01:53.377Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'export'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:01:54.809Z] File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers"}}
[debug] [2024-06-15T23:01:55.811Z] Validating nodejs source
[debug] [2024-06-15T23:01:56.348Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:01:56.348Z] Building nodejs source
[debug] [2024-06-15T23:01:56.348Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:01:56.348Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:01:56.349Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8929

[info] { REDIS_URL: undefined }

[error] ReferenceError: postTriggerToUpdateRedisDb is not defined
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/index.js:21:40)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)
    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/bin/firebase-functions.js:56:56

[debug] [2024-06-15T23:01:56.757Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: postTriggerToUpdateRedisDb is not defined
[debug] [2024-06-15T23:02:01.630Z] File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers"}}
[debug] [2024-06-15T23:02:02.631Z] Validating nodejs source
[debug] [2024-06-15T23:02:03.164Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:02:03.164Z] Building nodejs source
[debug] [2024-06-15T23:02:03.164Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:02:03.165Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:02:03.166Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8830

[debug] [2024-06-15T23:02:03.466Z] File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers"}}
[info] { REDIS_URL: undefined }

[error] ReferenceError: postTriggerToUpdateRedisDb is not defined
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/index.js:24:40)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)
    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/bin/firebase-functions.js:56:56

[debug] [2024-06-15T23:02:03.610Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: postTriggerToUpdateRedisDb is not defined
[debug] [2024-06-15T23:02:04.467Z] Validating nodejs source
[debug] [2024-06-15T23:02:04.979Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:02:04.979Z] Building nodejs source
[debug] [2024-06-15T23:02:04.979Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:02:04.980Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:02:04.980Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8165

[error] /Users/hacthe/project/sucmanh2000/server/index.js:4
const express = require("express");
^^^^^

SyntaxError: Unexpected token 'const'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:02:05.065Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token 'const'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:02:05.358Z] File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers"}}
[debug] [2024-06-15T23:02:06.358Z] Validating nodejs source
[debug] [2024-06-15T23:02:06.911Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:02:06.911Z] Building nodejs source
[debug] [2024-06-15T23:02:06.911Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:02:06.912Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:02:06.912Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[info] Serving at port 8570

[error] /Users/hacthe/project/sucmanh2000/server/index.js:1
const {postTriggerToUpdateRedisDb}
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

SyntaxError: Missing initializer in destructuring declaration
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at loadModule (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:40:16)
    at loadStack (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/runtime/loader.js:93:23)

[debug] [2024-06-15T23:02:07.008Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Missing initializer in destructuring declaration
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:02:07.446Z] File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers"}}
[debug] [2024-06-15T23:02:07.546Z] File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/index.js changed, reloading triggers"}}
[debug] [2024-06-15T23:02:08.548Z] Validating nodejs source
[debug] [2024-06-15T23:02:09.131Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:02:09.131Z] Building nodejs source
[debug] [2024-06-15T23:02:09.131Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:02:09.131Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:02:09.132Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8589

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:02:09.371Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:02:19.379Z] Found a v2 firestore trigger.
[debug] [2024-06-15T23:02:19.379Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"{collectionId}/{postId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:02:19.380Z] >>> [apiv2][query] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 [none]
[debug] [2024-06-15T23:02:19.380Z] >>> [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"{collectionId}/{postId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:02:19.396Z] Jun 16, 2024 6:02:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:02:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:02:19.527Z] Jun 16, 2024 6:02:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:02:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:02:19.717Z] <<< [apiv2][status] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 200
[debug] [2024-06-15T23:02:19.717Z] <<< [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 {"eventType":"google.cloud.firestore.document.v1.written","database":"(default)","namespace":"(default)","document":{"value":"{collectionId}/{postId}","matchType":"PATH_PATTERN"}}
[info] ✔  functions[us-central1-postTriggerToUpdateRedisDb]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2024-06-15T23:02:52.676Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:02:53.679Z] Validating nodejs source
[debug] [2024-06-15T23:02:54.300Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:02:54.300Z] Building nodejs source
[debug] [2024-06-15T23:02:54.300Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:02:54.301Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:02:54.301Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8176

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:02:54.659Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:02:56.035Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:02:57.038Z] Validating nodejs source
[debug] [2024-06-15T23:02:57.578Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:02:57.578Z] Building nodejs source
[debug] [2024-06-15T23:02:57.578Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:02:57.579Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:02:57.579Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8073

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:02:57.813Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:02:58.784Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:02:59.787Z] Validating nodejs source
[debug] [2024-06-15T23:03:00.303Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:03:00.303Z] Building nodejs source
[debug] [2024-06-15T23:03:00.303Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:03:00.304Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:03:00.305Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8294

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:03:00.586Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:03:03.140Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:03:04.141Z] Validating nodejs source
[debug] [2024-06-15T23:03:04.704Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:03:04.704Z] Building nodejs source
[debug] [2024-06-15T23:03:04.704Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:03:04.705Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:03:04.706Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] Serving at port 8193

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:03:04.941Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:03:05.812Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:03:06.813Z] Validating nodejs source
[debug] [2024-06-15T23:03:07.370Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:03:07.370Z] Building nodejs source
[debug] [2024-06-15T23:03:07.370Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:03:07.370Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:03:07.371Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8568

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:03:07.611Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:03:23.187Z] Jun 16, 2024 6:03:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:30.635Z] Jun 16, 2024 6:03:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:30.762Z] Jun 16, 2024 6:03:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:30.780Z] Jun 16, 2024 6:03:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:31.000Z] [work-queue] {"queuedWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:03:31.000Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:03:31.001Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:03:31.000Z"],"workRunningCount":1}
[debug] [2024-06-15T23:03:31.001Z] Accepted request POST /functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0 --> us-central1-postTriggerToUpdateRedisDb-0
[debug] [2024-06-15T23:03:31.010Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T23:03:31.011Z] [functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/"}}
[debug] [2024-06-15T23:03:31.012Z] [worker-pool] Cleaned up workers for asia-southeast1-app: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for asia-southeast1-app: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:03:31.020Z] [worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:03:31.022Z] [worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1"}}
[debug] [2024-06-15T23:03:31.091Z] Jun 16, 2024 6:03:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:31.240Z] Jun 16, 2024 6:03:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:31.267Z] Jun 16, 2024 6:03:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:31.369Z] Jun 16, 2024 6:03:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:31.811Z] [runtime-status] [38867] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:03:31.811Z] [runtime-status] [38867] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:03:31.812Z] [runtime-status] [38867] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T23:03:31.812Z] [runtime-status] [38867] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:03:31.926Z] [runtime-status] [38867] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T23:03:31.927Z] [runtime-status] [38867] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T23:03:31.927Z] [runtime-status] [38867] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:03:31.927Z] [runtime-status] [38867] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:03:31.928Z] [runtime-status] [38867] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:03:31.928Z] [runtime-status] [38867] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T23:03:32.007Z] [runtime-status] [38867] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:03:32.113Z] [runtime-status] [38867] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T23:03:32.114Z] [runtime-status] [38867] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_96dcd476387fbaf3.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_96dcd476387fbaf3.sock"}}
[debug] [2024-06-15T23:03:32.155Z] [worker-us-central1-postTriggerToUpdateRedisDb-d1ada187-db05-4756-b8c1-e6c347c8873e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-d1ada187-db05-4756-b8c1-e6c347c8873e]: IDLE"}}
[debug] [2024-06-15T23:03:32.155Z] [worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb)"}}
[info] i  functions: Beginning execution of "us-central1-postTriggerToUpdateRedisDb" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Beginning execution of \"us-central1-postTriggerToUpdateRedisDb\""}}
[debug] [2024-06-15T23:03:32.155Z] [worker-us-central1-postTriggerToUpdateRedisDb-d1ada187-db05-4756-b8c1-e6c347c8873e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-d1ada187-db05-4756-b8c1-e6c347c8873e]: BUSY"}}
[debug] [2024-06-15T23:03:32.160Z] [runtime-status] [38867] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)","id":"7ad5b0b4-ecfb-4a29-bcfe-bc862164131d","subject":"documents/testt/L7iHzNpMRRnQEd1ESYva","time":"2024-06-15T23:03:30Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"sucmanh2000-2b5f0","database":"(default)","namespace":"(default)","document":"testt/L7iHzNpMRRnQEd1ESYva","data":{"type":"Buffer","data":[10,127,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,194,187,184,179,6,16,184,194,235,148,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [38867] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)\",\"id\":\"7ad5b0b4-ecfb-4a29-bcfe-bc862164131d\",\"subject\":\"documents/testt/L7iHzNpMRRnQEd1ESYva\",\"time\":\"2024-06-15T23:03:30Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"sucmanh2000-2b5f0\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"testt/L7iHzNpMRRnQEd1ESYva\",\"data\":{\"type\":\"Buffer\",\"data\":[10,127,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,194,187,184,179,6,16,184,194,235,148,3,26,0]}}"}}
[warn] ⚠  functions: TypeError: Cannot read properties of undefined (reading 'params')
    at /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:6:46
    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/common/onInit.js:33:16
    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/trace.js:16:28
    at func (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/providers/firestore.js:316:78)
    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:524:16
    at runFunction (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runCloudEvent (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:523:11)
    at processBackground (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:490:16)
    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"TypeError: Cannot read properties of undefined (reading 'params')\n    at /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:6:46\n    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/common/onInit.js:33:16\n    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/trace.js:16:28\n    at func (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/providers/firestore.js:316:78)\n    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:524:16\n    at runFunction (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runCloudEvent (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:523:11)\n    at processBackground (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:490:16)\n    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2024-06-15T23:03:32.168Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:03:32.168Z] [worker-us-central1-postTriggerToUpdateRedisDb-d1ada187-db05-4756-b8c1-e6c347c8873e]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-d1ada187-db05-4756-b8c1-e6c347c8873e]: exited"}}
[debug] [2024-06-15T23:03:32.168Z] [worker-us-central1-postTriggerToUpdateRedisDb-d1ada187-db05-4756-b8c1-e6c347c8873e]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-d1ada187-db05-4756-b8c1-e6c347c8873e]: FINISHED"}}
[debug] [2024-06-15T23:03:32.182Z] Jun 16, 2024 6:03:32 AM com.google.cloud.datastore.emulator.impl.events.FunctionsEmulatorEventPublisher sendHttpRequestV2
WARNING: Unsuccessful HTTP response when publishing v2 event for projects/sucmanh2000-2b5f0/eventarcTriggers/us-central1-postTriggerToUpdateRedisDb-0: 500 Internal Server Error
POST http://127.0.0.1:4003/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0
{"code":"ECONNRESET"}
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:32 AM com.google.cloud.datastore.emulator.impl.events.FunctionsEmulatorEventPublisher sendHttpRequestV2\nWARNING: Unsuccessful HTTP response when publishing v2 event for projects/sucmanh2000-2b5f0/eventarcTriggers/us-central1-postTriggerToUpdateRedisDb-0: 500 Internal Server Error\nPOST http://127.0.0.1:4003/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0\n{\"code\":\"ECONNRESET\"}\n"}}
[debug] [2024-06-15T23:03:33.288Z] Jun 16, 2024 6:03:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:41.338Z] Jun 16, 2024 6:03:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:43.322Z] Jun 16, 2024 6:03:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:48.888Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:03:49.889Z] Validating nodejs source
[debug] [2024-06-15T23:03:50.511Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:03:50.511Z] Building nodejs source
[debug] [2024-06-15T23:03:50.511Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:03:50.512Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:03:50.513Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8839

[debug] [2024-06-15T23:03:50.701Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:03:50.880Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:03:51.377Z] Jun 16, 2024 6:03:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:51.702Z] Validating nodejs source
[debug] [2024-06-15T23:03:52.235Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:03:52.235Z] Building nodejs source
[debug] [2024-06-15T23:03:52.235Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:03:52.237Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:03:52.238Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8044

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:03:52.482Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:03:53.346Z] Jun 16, 2024 6:03:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:03:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:03:54.819Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:03:55.823Z] Validating nodejs source
[debug] [2024-06-15T23:03:56.377Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:03:56.377Z] Building nodejs source
[debug] [2024-06-15T23:03:56.377Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:03:56.377Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:03:56.378Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8062

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:03:56.653Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:03:58.949Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:03:59.952Z] Validating nodejs source
[debug] [2024-06-15T23:04:00.452Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:04:00.452Z] Building nodejs source
[debug] [2024-06-15T23:04:00.452Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:04:00.452Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:04:00.453Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8748

[error] /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:9
      context,
      ^^^^^^^

SyntaxError: Unexpected identifier
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/index.js:1:38)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2024-06-15T23:04:00.549Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected identifier
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:04:00.784Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:04:01.400Z] Jun 16, 2024 6:04:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:01.785Z] Validating nodejs source
[debug] [2024-06-15T23:04:02.290Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:04:02.290Z] Building nodejs source
[debug] [2024-06-15T23:04:02.290Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:04:02.291Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:04:02.292Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8615

[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:04:02.533Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:04:03.390Z] Jun 16, 2024 6:04:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:05.027Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:04:06.031Z] Validating nodejs source
[debug] [2024-06-15T23:04:06.584Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:04:06.584Z] Building nodejs source
[debug] [2024-06-15T23:04:06.584Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:04:06.585Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:04:06.585Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] Serving at port 8553

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:04:06.847Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:04:07.346Z] Jun 16, 2024 6:04:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:07.347Z] Jun 16, 2024 6:04:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:07.349Z] Jun 16, 2024 6:04:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:04:13.415Z] Jun 16, 2024 6:04:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:13.486Z] Jun 16, 2024 6:04:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:13.527Z] [work-queue] {"queuedWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:04:13.527Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:04:13.527Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:04:13.527Z"],"workRunningCount":1}
[debug] [2024-06-15T23:04:13.527Z] Accepted request POST /functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0 --> us-central1-postTriggerToUpdateRedisDb-0
[debug] [2024-06-15T23:04:13.529Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T23:04:13.529Z] [functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/"}}
[debug] [2024-06-15T23:04:13.529Z] [worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:04:13.531Z] [worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:04:13.531Z] [worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1"}}
[debug] [2024-06-15T23:04:14.159Z] [runtime-status] [39019] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:04:14.160Z] [runtime-status] [39019] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:04:14.160Z] [runtime-status] [39019] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T23:04:14.161Z] [runtime-status] [39019] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:04:14.232Z] [runtime-status] [39019] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T23:04:14.233Z] [runtime-status] [39019] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T23:04:14.233Z] [runtime-status] [39019] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:04:14.233Z] [runtime-status] [39019] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:04:14.234Z] [runtime-status] [39019] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:04:14.234Z] [runtime-status] [39019] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T23:04:14.283Z] [runtime-status] [39019] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:04:14.347Z] [runtime-status] [39019] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T23:04:14.348Z] [runtime-status] [39019] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_4c62bfb5cfc2c965.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_4c62bfb5cfc2c965.sock"}}
[debug] [2024-06-15T23:04:14.443Z] [worker-us-central1-postTriggerToUpdateRedisDb-9604d1ce-b0a7-42a2-89d0-5cfb344b329f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-9604d1ce-b0a7-42a2-89d0-5cfb344b329f]: IDLE"}}
[debug] [2024-06-15T23:04:14.443Z] [worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb)"}}
[info] i  functions: Beginning execution of "us-central1-postTriggerToUpdateRedisDb" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Beginning execution of \"us-central1-postTriggerToUpdateRedisDb\""}}
[debug] [2024-06-15T23:04:14.443Z] [worker-us-central1-postTriggerToUpdateRedisDb-9604d1ce-b0a7-42a2-89d0-5cfb344b329f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-9604d1ce-b0a7-42a2-89d0-5cfb344b329f]: BUSY"}}
[debug] [2024-06-15T23:04:14.446Z] [runtime-status] [39019] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)","id":"8d651fae-0c7a-4873-966f-fe5e47bb9e3c","subject":"documents/testt/L7iHzNpMRRnQEd1ESYva","time":"2024-06-15T23:04:13Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"sucmanh2000-2b5f0","database":"(default)","namespace":"(default)","document":"testt/L7iHzNpMRRnQEd1ESYva","data":{"type":"Buffer","data":[10,145,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,237,187,184,179,6,16,216,253,164,244,1,18,127,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,194,187,184,179,6,16,184,194,235,148,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39019] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)\",\"id\":\"8d651fae-0c7a-4873-966f-fe5e47bb9e3c\",\"subject\":\"documents/testt/L7iHzNpMRRnQEd1ESYva\",\"time\":\"2024-06-15T23:04:13Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"sucmanh2000-2b5f0\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"testt/L7iHzNpMRRnQEd1ESYva\",\"data\":{\"type\":\"Buffer\",\"data\":[10,145,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,237,187,184,179,6,16,216,253,164,244,1,18,127,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,194,187,184,179,6,16,184,194,235,148,3,26,0]}}"}}
[warn] ⚠  functions: TypeError: Cannot read properties of undefined (reading 'data')
    at /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:6:31
    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/common/onInit.js:33:16
    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/trace.js:16:28
    at func (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/providers/firestore.js:316:78)
    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:524:16
    at runFunction (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runCloudEvent (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:523:11)
    at processBackground (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:490:16)
    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"TypeError: Cannot read properties of undefined (reading 'data')\n    at /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:6:31\n    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/common/onInit.js:33:16\n    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/trace.js:16:28\n    at func (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/providers/firestore.js:316:78)\n    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:524:16\n    at runFunction (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runCloudEvent (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:523:11)\n    at processBackground (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:490:16)\n    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2024-06-15T23:04:14.456Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:04:14.456Z] [worker-us-central1-postTriggerToUpdateRedisDb-9604d1ce-b0a7-42a2-89d0-5cfb344b329f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-9604d1ce-b0a7-42a2-89d0-5cfb344b329f]: exited"}}
[debug] [2024-06-15T23:04:14.457Z] [worker-us-central1-postTriggerToUpdateRedisDb-9604d1ce-b0a7-42a2-89d0-5cfb344b329f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-9604d1ce-b0a7-42a2-89d0-5cfb344b329f]: FINISHED"}}
[debug] [2024-06-15T23:04:14.460Z] Jun 16, 2024 6:04:14 AM com.google.cloud.datastore.emulator.impl.events.FunctionsEmulatorEventPublisher sendHttpRequestV2
WARNING: Unsuccessful HTTP response when publishing v2 event for projects/sucmanh2000-2b5f0/eventarcTriggers/us-central1-postTriggerToUpdateRedisDb-0: 500 Internal Server Error
POST http://127.0.0.1:4003/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0
{"code":"ECONNRESET"}
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:14 AM com.google.cloud.datastore.emulator.impl.events.FunctionsEmulatorEventPublisher sendHttpRequestV2\nWARNING: Unsuccessful HTTP response when publishing v2 event for projects/sucmanh2000-2b5f0/eventarcTriggers/us-central1-postTriggerToUpdateRedisDb-0: 500 Internal Server Error\nPOST http://127.0.0.1:4003/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0\n{\"code\":\"ECONNRESET\"}\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:04:21.443Z] Jun 16, 2024 6:04:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:22.397Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:04:23.400Z] Validating nodejs source
[debug] [2024-06-15T23:04:24.021Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:04:24.021Z] Building nodejs source
[debug] [2024-06-15T23:04:24.021Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:04:24.022Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:04:24.023Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T23:04:24.023Z] Jun 16, 2024 6:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] Serving at port 8278

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:04:24.316Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:04:26.058Z] Jun 16, 2024 6:04:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:26.059Z] Jun 16, 2024 6:04:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:30.707Z] Jun 16, 2024 6:04:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:30.739Z] Jun 16, 2024 6:04:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:30.745Z] [work-queue] {"queuedWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:04:30.745Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:04:30.745Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:04:30.745Z"],"workRunningCount":1}
[debug] [2024-06-15T23:04:30.745Z] Accepted request POST /functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0 --> us-central1-postTriggerToUpdateRedisDb-0
[debug] [2024-06-15T23:04:30.746Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T23:04:30.747Z] [functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/"}}
[debug] [2024-06-15T23:04:30.747Z] [worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:04:30.748Z] [worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:04:30.748Z] [worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1"}}
[debug] [2024-06-15T23:04:30.766Z] Jun 16, 2024 6:04:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:31.323Z] [runtime-status] [39060] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:04:31.323Z] [runtime-status] [39060] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:04:31.324Z] [runtime-status] [39060] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T23:04:31.324Z] [runtime-status] [39060] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:04:31.403Z] [runtime-status] [39060] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T23:04:31.403Z] [runtime-status] [39060] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T23:04:31.403Z] [runtime-status] [39060] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:04:31.404Z] [runtime-status] [39060] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:04:31.404Z] [runtime-status] [39060] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:04:31.404Z] [runtime-status] [39060] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T23:04:31.457Z] [runtime-status] [39060] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[debug] [2024-06-15T23:04:31.481Z] Jun 16, 2024 6:04:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:04:31.554Z] [runtime-status] [39060] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T23:04:31.556Z] [runtime-status] [39060] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_8d9e7b141d7fb82d.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_8d9e7b141d7fb82d.sock"}}
[debug] [2024-06-15T23:04:31.563Z] [worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: IDLE"}}
[debug] [2024-06-15T23:04:31.563Z] [worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb)"}}
[info] i  functions: Beginning execution of "us-central1-postTriggerToUpdateRedisDb" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Beginning execution of \"us-central1-postTriggerToUpdateRedisDb\""}}
[debug] [2024-06-15T23:04:31.563Z] [worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: BUSY"}}
[debug] [2024-06-15T23:04:31.566Z] [runtime-status] [39060] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)","id":"481477b2-a38c-41e7-af3e-4cdb1be5405a","subject":"documents/testt/L7iHzNpMRRnQEd1ESYva","time":"2024-06-15T23:04:30Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"sucmanh2000-2b5f0","database":"(default)","namespace":"(default)","document":"testt/L7iHzNpMRRnQEd1ESYva","data":{"type":"Buffer","data":[10,161,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,254,187,184,179,6,16,248,240,212,216,2,18,145,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,237,187,184,179,6,16,216,253,164,244,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39060] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)\",\"id\":\"481477b2-a38c-41e7-af3e-4cdb1be5405a\",\"subject\":\"documents/testt/L7iHzNpMRRnQEd1ESYva\",\"time\":\"2024-06-15T23:04:30Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"sucmanh2000-2b5f0\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"testt/L7iHzNpMRRnQEd1ESYva\",\"data\":{\"type\":\"Buffer\",\"data\":[10,161,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,254,187,184,179,6,16,248,240,212,216,2,18,145,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,237,187,184,179,6,16,216,253,164,244,1,26,0]}}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    change: { {"user":"  change: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   change: {"}}
[info] >      specversion: '1.0', {"user":"    specversion: '1.0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     specversion: '1.0',"}}
[info] >      type: 'google.cloud.firestore.document.v1.written', {"user":"    type: 'google.cloud.firestore.document.v1.written',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'google.cloud.firestore.document.v1.written',"}}
[info] >      source: '//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)', {"user":"    source: '//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     source: '//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)',"}}
[info] >      id: '481477b2-a38c-41e7-af3e-4cdb1be5405a', {"user":"    id: '481477b2-a38c-41e7-af3e-4cdb1be5405a',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: '481477b2-a38c-41e7-af3e-4cdb1be5405a',"}}
[info] >      subject: 'documents/testt/L7iHzNpMRRnQEd1ESYva', {"user":"    subject: 'documents/testt/L7iHzNpMRRnQEd1ESYva',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     subject: 'documents/testt/L7iHzNpMRRnQEd1ESYva',"}}
[info] >      time: '2024-06-15T23:04:30Z', {"user":"    time: '2024-06-15T23:04:30Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     time: '2024-06-15T23:04:30Z',"}}
[info] >      location: 'us-central1', {"user":"    location: 'us-central1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     location: 'us-central1',"}}
[info] >      project: 'sucmanh2000-2b5f0', {"user":"    project: 'sucmanh2000-2b5f0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     project: 'sucmanh2000-2b5f0',"}}
[info] >      database: '(default)', {"user":"    database: '(default)',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     database: '(default)',"}}
[info] >      namespace: '(default)', {"user":"    namespace: '(default)',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     namespace: '(default)',"}}
[info] >      document: 'testt/L7iHzNpMRRnQEd1ESYva', {"user":"    document: 'testt/L7iHzNpMRRnQEd1ESYva',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     document: 'testt/L7iHzNpMRRnQEd1ESYva',"}}
[info] >      data: Change { {"user":"    data: Change {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: Change {"}}
[info] >        before: [QueryDocumentSnapshot], {"user":"      before: [QueryDocumentSnapshot],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m       before: [QueryDocumentSnapshot],"}}
[info] >        after: [QueryDocumentSnapshot] {"user":"      after: [QueryDocumentSnapshot]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m       after: [QueryDocumentSnapshot]"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      params: { collectionId: 'testt', postId: 'L7iHzNpMRRnQEd1ESYva' } {"user":"    params: { collectionId: 'testt', postId: 'L7iHzNpMRRnQEd1ESYva' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     params: { collectionId: 'testt', postId: 'L7iHzNpMRRnQEd1ESYva' }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    context: undefined {"user":"  context: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   context: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:04:31.571Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-postTriggerToUpdateRedisDb" in 7.504292ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finished \"us-central1-postTriggerToUpdateRedisDb\" in 7.504292ms"}}
[debug] [2024-06-15T23:04:31.571Z] [worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: IDLE"}}
[debug] [2024-06-15T23:04:31.571Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T23:04:31.571Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T23:04:31.571Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:04:33.476Z] Jun 16, 2024 6:04:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:04:34.333Z] [worker-pool] Shutting down IDLE worker (us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:04:34.333Z] [worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: FINISHING"}}
[debug] [2024-06-15T23:04:34.342Z] [worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: exited"}}
[debug] [2024-06-15T23:04:34.342Z] [worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-dc72f45c-6e2a-44ef-bbb3-f9d49f7582cb]: FINISHED"}}
[debug] [2024-06-15T23:04:41.511Z] Jun 16, 2024 6:04:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:41.520Z] Jun 16, 2024 6:04:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:43.501Z] Jun 16, 2024 6:04:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:51.303Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:04:51.541Z] Jun 16, 2024 6:04:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:51.541Z] Jun 16, 2024 6:04:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:52.305Z] Validating nodejs source
[debug] [2024-06-15T23:04:53.525Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:04:53.525Z] Building nodejs source
[debug] [2024-06-15T23:04:53.525Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:04:53.526Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:04:53.527Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T23:04:53.528Z] Jun 16, 2024 6:04:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] Serving at port 8771

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:04:53.909Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:04:55.939Z] Jun 16, 2024 6:04:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:04:55.946Z] Jun 16, 2024 6:04:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:04:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:00.116Z] Jun 16, 2024 6:05:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:00.140Z] [work-queue] {"queuedWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:05:00.140Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:05:00.141Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:05:00.140Z"],"workRunningCount":1}
[debug] [2024-06-15T23:05:00.141Z] Accepted request POST /functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0 --> us-central1-postTriggerToUpdateRedisDb-0
[debug] [2024-06-15T23:05:00.142Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T23:05:00.142Z] [functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/"}}
[debug] [2024-06-15T23:05:00.143Z] [worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:05:00.144Z] [worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:05:00.144Z] [worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1"}}
[debug] [2024-06-15T23:05:00.795Z] [runtime-status] [39139] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:05:00.795Z] [runtime-status] [39139] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:05:00.796Z] [runtime-status] [39139] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T23:05:00.796Z] [runtime-status] [39139] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:05:00.910Z] [runtime-status] [39139] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T23:05:00.910Z] [runtime-status] [39139] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T23:05:00.910Z] [runtime-status] [39139] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:05:00.910Z] [runtime-status] [39139] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:05:00.911Z] [runtime-status] [39139] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:05:00.912Z] [runtime-status] [39139] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T23:05:00.984Z] [runtime-status] [39139] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:05:01.085Z] [runtime-status] [39139] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T23:05:01.087Z] [runtime-status] [39139] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_314f3d799f836e7d.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_314f3d799f836e7d.sock"}}
[debug] [2024-06-15T23:05:01.161Z] [worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: IDLE"}}
[debug] [2024-06-15T23:05:01.161Z] [worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb)"}}
[info] i  functions: Beginning execution of "us-central1-postTriggerToUpdateRedisDb" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Beginning execution of \"us-central1-postTriggerToUpdateRedisDb\""}}
[debug] [2024-06-15T23:05:01.161Z] [worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: BUSY"}}
[debug] [2024-06-15T23:05:01.164Z] [runtime-status] [39139] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)","id":"fa302103-01f3-47ac-a6af-6993509548c5","subject":"documents/testt/L7iHzNpMRRnQEd1ESYva","time":"2024-06-15T23:05:00Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"sucmanh2000-2b5f0","database":"(default)","namespace":"(default)","document":"testt/L7iHzNpMRRnQEd1ESYva","data":{"type":"Buffer","data":[10,175,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,18,13,10,2,104,97,18,7,138,1,4,97,101,114,102,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,11,8,156,188,184,179,6,16,160,137,250,59,18,161,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,254,187,184,179,6,16,248,240,212,216,2,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39139] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)\",\"id\":\"fa302103-01f3-47ac-a6af-6993509548c5\",\"subject\":\"documents/testt/L7iHzNpMRRnQEd1ESYva\",\"time\":\"2024-06-15T23:05:00Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"sucmanh2000-2b5f0\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"testt/L7iHzNpMRRnQEd1ESYva\",\"data\":{\"type\":\"Buffer\",\"data\":[10,175,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,18,13,10,2,104,97,18,7,138,1,4,97,101,114,102,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,11,8,156,188,184,179,6,16,160,137,250,59,18,161,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,12,10,3,111,107,101,18,5,138,1,2,108,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,254,187,184,179,6,16,248,240,212,216,2,26,0]}}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    change: { {"user":"  change: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   change: {"}}
[info] >      specversion: '1.0', {"user":"    specversion: '1.0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     specversion: '1.0',"}}
[info] >      type: 'google.cloud.firestore.document.v1.written', {"user":"    type: 'google.cloud.firestore.document.v1.written',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'google.cloud.firestore.document.v1.written',"}}
[info] >      source: '//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)', {"user":"    source: '//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     source: '//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)',"}}
[info] >      id: 'fa302103-01f3-47ac-a6af-6993509548c5', {"user":"    id: 'fa302103-01f3-47ac-a6af-6993509548c5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'fa302103-01f3-47ac-a6af-6993509548c5',"}}
[info] >      subject: 'documents/testt/L7iHzNpMRRnQEd1ESYva', {"user":"    subject: 'documents/testt/L7iHzNpMRRnQEd1ESYva',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     subject: 'documents/testt/L7iHzNpMRRnQEd1ESYva',"}}
[info] >      time: '2024-06-15T23:05:00Z', {"user":"    time: '2024-06-15T23:05:00Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     time: '2024-06-15T23:05:00Z',"}}
[info] >      location: 'us-central1', {"user":"    location: 'us-central1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     location: 'us-central1',"}}
[info] >      project: 'sucmanh2000-2b5f0', {"user":"    project: 'sucmanh2000-2b5f0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     project: 'sucmanh2000-2b5f0',"}}
[info] >      database: '(default)', {"user":"    database: '(default)',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     database: '(default)',"}}
[info] >      namespace: '(default)', {"user":"    namespace: '(default)',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     namespace: '(default)',"}}
[info] >      document: 'testt/L7iHzNpMRRnQEd1ESYva', {"user":"    document: 'testt/L7iHzNpMRRnQEd1ESYva',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     document: 'testt/L7iHzNpMRRnQEd1ESYva',"}}
[info] >      data: Change { {"user":"    data: Change {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: Change {"}}
[info] >        before: [QueryDocumentSnapshot], {"user":"      before: [QueryDocumentSnapshot],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m       before: [QueryDocumentSnapshot],"}}
[info] >        after: [QueryDocumentSnapshot] {"user":"      after: [QueryDocumentSnapshot]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m       after: [QueryDocumentSnapshot]"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      params: {} {"user":"    params: {}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     params: {}"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    context: undefined {"user":"  context: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   context: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:05:01.168Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-postTriggerToUpdateRedisDb" in 6.426125ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finished \"us-central1-postTriggerToUpdateRedisDb\" in 6.426125ms"}}
[debug] [2024-06-15T23:05:01.168Z] [worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: IDLE"}}
[debug] [2024-06-15T23:05:01.168Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T23:05:01.168Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T23:05:01.168Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:05:01.566Z] Jun 16, 2024 6:05:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:01.566Z] Jun 16, 2024 6:05:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:03.544Z] Jun 16, 2024 6:05:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:05:03.927Z] [worker-pool] Shutting down IDLE worker (us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:05:03.927Z] [worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: FINISHING"}}
[debug] [2024-06-15T23:05:03.927Z] Definition for trigger postTriggerToUpdateRedisDb changed from {"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"}} to {"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"}} {"metadata":{"emulator":{"name":"functions"},"message":"Definition for trigger postTriggerToUpdateRedisDb changed from {\"eventType\":\"google.cloud.firestore.document.v1.written\",\"eventFilters\":{\"database\":\"(default)\",\"namespace\":\"(default)\"},\"eventFilterPathPatterns\":{\"document\":\"{collectionId}/{postId}\"}} to {\"eventType\":\"google.cloud.firestore.document.v1.written\",\"eventFilters\":{\"database\":\"(default)\",\"namespace\":\"(default)\"},\"eventFilterPathPatterns\":{\"document\":\"*\"}}"}}
[debug] [2024-06-15T23:05:03.928Z] Found a v2 firestore trigger.
[debug] [2024-06-15T23:05:03.928Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"*\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:05:03.929Z] >>> [apiv2][query] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 [none]
[debug] [2024-06-15T23:05:03.929Z] >>> [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"*\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:05:03.931Z] [worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: exited"}}
[debug] [2024-06-15T23:05:03.932Z] [worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-0a17e9f7-b0ca-4e5c-8245-26a39ff0a514]: FINISHED"}}
[debug] [2024-06-15T23:05:03.932Z] Jun 16, 2024 6:05:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:03.943Z] <<< [apiv2][status] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 200
[debug] [2024-06-15T23:05:03.943Z] <<< [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 {"eventType":"google.cloud.firestore.document.v1.written","database":"(default)","namespace":"(default)","document":{"value":"*","matchType":"PATH_PATTERN"}}
[info] ✔  functions[us-central1-postTriggerToUpdateRedisDb]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2024-06-15T23:05:11.598Z] Jun 16, 2024 6:05:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:11.600Z] Jun 16, 2024 6:05:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:13.570Z] Jun 16, 2024 6:05:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:21.639Z] Jun 16, 2024 6:05:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:21.639Z] Jun 16, 2024 6:05:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:23.602Z] Jun 16, 2024 6:05:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:30.155Z] Jun 16, 2024 6:05:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:30.645Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:05:31.647Z] Validating nodejs source
[debug] [2024-06-15T23:05:32.275Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:05:32.275Z] Building nodejs source
[debug] [2024-06-15T23:05:32.275Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:05:32.276Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:05:32.277Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T23:05:32.278Z] Jun 16, 2024 6:05:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jun 16, 2024 6:05:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJun 16, 2024 6:05:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] Serving at port 8232

[error] /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:7
    console.log({
    ^^^^^^^

SyntaxError: Missing initializer in const declaration
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/index.js:1:38)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2024-06-15T23:05:32.397Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Missing initializer in const declaration
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:05:39.353Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:05:40.357Z] Validating nodejs source
[debug] [2024-06-15T23:05:41.066Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:05:41.066Z] Building nodejs source
[debug] [2024-06-15T23:05:41.066Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:05:41.067Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:05:41.068Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8711

[debug] [2024-06-15T23:05:41.445Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:05:41.470Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:05:41.679Z] Jun 16, 2024 6:05:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:41.686Z] Jun 16, 2024 6:05:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:42.447Z] Validating nodejs source
[debug] [2024-06-15T23:05:42.963Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:05:42.963Z] Building nodejs source
[debug] [2024-06-15T23:05:42.964Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:05:42.964Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:05:42.965Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8131

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:05:43.237Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:05:45.155Z] Jun 16, 2024 6:05:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:45.713Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:05:46.715Z] Validating nodejs source
[debug] [2024-06-15T23:05:47.240Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:05:47.240Z] Building nodejs source
[debug] [2024-06-15T23:05:47.240Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:05:47.240Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:05:47.241Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:05:47.241Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8287

[error] /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:8
    console.log({
    ^^^^^^^

SyntaxError: Missing initializer in const declaration
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/index.js:1:38)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2024-06-15T23:05:47.378Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Missing initializer in const declaration
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:05:48.242Z] Validating nodejs source
[debug] [2024-06-15T23:05:48.785Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:05:48.785Z] Building nodejs source
[debug] [2024-06-15T23:05:48.785Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:05:48.786Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:05:48.786Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8045

[error] /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:8
    console.log({
    ^^^^^^^

SyntaxError: Missing initializer in const declaration
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/index.js:1:38)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2024-06-15T23:05:48.872Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Missing initializer in const declaration
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:05:51.719Z] Jun 16, 2024 6:05:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:51.721Z] Jun 16, 2024 6:05:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:05:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:05:52.832Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:05:53.834Z] Validating nodejs source
[debug] [2024-06-15T23:05:54.340Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:05:54.341Z] Building nodejs source
[debug] [2024-06-15T23:05:54.341Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:05:54.341Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:05:54.341Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:05:54.342Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8685

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:05:54.674Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:05:55.343Z] Validating nodejs source
[debug] [2024-06-15T23:05:55.908Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:05:55.908Z] Building nodejs source
[debug] [2024-06-15T23:05:55.908Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:05:55.909Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:05:55.910Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8704

[debug] [2024-06-15T23:05:56.036Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:05:56.164Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:05:57.039Z] Validating nodejs source
[debug] [2024-06-15T23:05:57.596Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:05:57.597Z] Building nodejs source
[debug] [2024-06-15T23:05:57.597Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:05:57.598Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:05:57.599Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8424

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:05:57.836Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:05:58.692Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:05:59.694Z] Validating nodejs source
[debug] [2024-06-15T23:06:00.249Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:06:00.249Z] Building nodejs source
[debug] [2024-06-15T23:06:00.249Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:06:00.250Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:06:00.251Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T23:06:00.251Z] Jun 16, 2024 6:06:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jun 16, 2024 6:06:00 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJun 16, 2024 6:06:00 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[info] Serving at port 8047

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:06:00.497Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:06:01.510Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:06:01.736Z] Jun 16, 2024 6:06:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:01.744Z] Jun 16, 2024 6:06:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:02.511Z] Validating nodejs source
[debug] [2024-06-15T23:06:03.071Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:06:03.071Z] Building nodejs source
[debug] [2024-06-15T23:06:03.071Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:06:03.072Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:06:03.072Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8345

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:06:03.310Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:06:10.573Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:06:11.575Z] Validating nodejs source
[debug] [2024-06-15T23:06:12.078Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:06:12.078Z] Building nodejs source
[debug] [2024-06-15T23:06:12.078Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:06:12.079Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:06:12.079Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T23:06:12.080Z] Jun 16, 2024 6:06:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jun 16, 2024 6:06:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJun 16, 2024 6:06:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] Serving at port 8446

[error] /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:12
    });
    ^

SyntaxError: Unexpected token '}'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/index.js:1:38)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2024-06-15T23:06:12.182Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token '}'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:06:12.412Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:06:13.413Z] Validating nodejs source
[debug] [2024-06-15T23:06:13.961Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:06:13.962Z] Building nodejs source
[debug] [2024-06-15T23:06:13.962Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:06:13.962Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:06:13.963Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8538

[debug] [2024-06-15T23:06:14.059Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:06:14.198Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:06:15.061Z] Validating nodejs source
[debug] [2024-06-15T23:06:15.646Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:06:15.646Z] Building nodejs source
[debug] [2024-06-15T23:06:15.646Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:06:15.646Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:06:15.647Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8669

[error] /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:12
    });
    ^

SyntaxError: Unexpected token '}'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/index.js:1:38)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2024-06-15T23:06:15.740Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token '}'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:06:15.953Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:06:16.955Z] Validating nodejs source
[debug] [2024-06-15T23:06:17.510Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:06:17.511Z] Building nodejs source
[debug] [2024-06-15T23:06:17.511Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:06:17.511Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:06:17.511Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8988

[error] /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:12
    });
    ^

SyntaxError: Unexpected token '}'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/index.js:1:38)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2024-06-15T23:06:17.619Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token '}'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:06:18.500Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:06:19.510Z] Validating nodejs source
[debug] [2024-06-15T23:06:20.079Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:06:20.079Z] Building nodejs source
[debug] [2024-06-15T23:06:20.079Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:06:20.080Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:06:20.080Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8824

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:06:20.320Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:06:20.780Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:06:21.781Z] Jun 16, 2024 6:06:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:21.781Z] Validating nodejs source
[debug] [2024-06-15T23:06:22.302Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:06:22.302Z] Building nodejs source
[debug] [2024-06-15T23:06:22.302Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:06:22.303Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:06:22.303Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T23:06:22.304Z] Jun 16, 2024 6:06:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] Serving at port 8856

[error] /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:12
    });
    ^

SyntaxError: Unexpected token '}'
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/hacthe/project/sucmanh2000/server/index.js:1:38)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2024-06-15T23:06:22.406Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token '}'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2024-06-15T23:06:23.547Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:06:24.549Z] Validating nodejs source
[debug] [2024-06-15T23:06:25.109Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:06:25.109Z] Building nodejs source
[debug] [2024-06-15T23:06:25.109Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:06:25.110Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:06:25.110Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8694

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:06:25.473Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:06:25.872Z] Jun 16, 2024 6:06:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:25.893Z] Jun 16, 2024 6:06:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:25.900Z] Jun 16, 2024 6:06:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:25.916Z] Jun 16, 2024 6:06:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:06:31.817Z] Jun 16, 2024 6:06:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:31.818Z] Jun 16, 2024 6:06:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:06:37.473Z] Jun 16, 2024 6:06:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:41.842Z] Jun 16, 2024 6:06:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:41.842Z] Jun 16, 2024 6:06:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:47.904Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:06:48.906Z] Validating nodejs source
[debug] [2024-06-15T23:06:49.500Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:06:49.500Z] Building nodejs source
[debug] [2024-06-15T23:06:49.500Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:06:49.501Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:06:49.501Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8143

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:06:49.885Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:06:51.873Z] Jun 16, 2024 6:06:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:51.874Z] Jun 16, 2024 6:06:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:06:59.188Z] Jun 16, 2024 6:06:59 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:06:59 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:07:01.902Z] Jun 16, 2024 6:07:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:01.902Z] Jun 16, 2024 6:07:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:04.076Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:07:05.078Z] Validating nodejs source
[debug] [2024-06-15T23:07:05.687Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:07:05.687Z] Building nodejs source
[debug] [2024-06-15T23:07:05.687Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:07:05.688Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:07:05.689Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8916

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:07:06.079Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:07:08.262Z] Jun 16, 2024 6:07:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:08.262Z] Jun 16, 2024 6:07:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:08.263Z] Jun 16, 2024 6:07:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:11.924Z] Jun 16, 2024 6:07:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:11.924Z] Jun 16, 2024 6:07:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:11.951Z] Jun 16, 2024 6:07:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:11.987Z] Jun 16, 2024 6:07:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:12.001Z] Jun 16, 2024 6:07:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:07:18.906Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:07:19.908Z] Validating nodejs source
[debug] [2024-06-15T23:07:20.605Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:07:20.605Z] Building nodejs source
[debug] [2024-06-15T23:07:20.605Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:07:20.606Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:07:20.607Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8711

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:07:20.947Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:07:21.963Z] Jun 16, 2024 6:07:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:25.741Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:07:26.741Z] Validating nodejs source
[debug] [2024-06-15T23:07:27.355Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:07:27.355Z] Building nodejs source
[debug] [2024-06-15T23:07:27.355Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:07:27.356Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:07:27.356Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:07:27.356Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8804

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:07:27.750Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"posts/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:07:28.358Z] Validating nodejs source
[debug] [2024-06-15T23:07:28.868Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:07:28.868Z] Building nodejs source
[debug] [2024-06-15T23:07:28.868Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:07:28.869Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:07:28.869Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8725

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:07:29.115Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"posts/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:07:29.272Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:07:30.274Z] Validating nodejs source
[debug] [2024-06-15T23:07:30.830Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:07:30.830Z] Building nodejs source
[debug] [2024-06-15T23:07:30.830Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:07:30.831Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:07:30.831Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8847

[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:07:31.070Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:07:31.989Z] Jun 16, 2024 6:07:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:32.999Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:07:34.001Z] Validating nodejs source
[debug] [2024-06-15T23:07:34.522Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:07:34.522Z] Building nodejs source
[debug] [2024-06-15T23:07:34.522Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:07:34.523Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:07:34.523Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8945

[debug] [2024-06-15T23:07:34.754Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:07:34.827Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:07:35.756Z] Validating nodejs source
[debug] [2024-06-15T23:07:36.276Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:07:36.276Z] Building nodejs source
[debug] [2024-06-15T23:07:36.276Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:07:36.276Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:07:36.277Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8112

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:07:36.604Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:07:37.758Z] Definition for trigger postTriggerToUpdateRedisDb changed from {"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"*"}} to {"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"posts/{postId}"}} {"metadata":{"emulator":{"name":"functions"},"message":"Definition for trigger postTriggerToUpdateRedisDb changed from {\"eventType\":\"google.cloud.firestore.document.v1.written\",\"eventFilters\":{\"database\":\"(default)\",\"namespace\":\"(default)\"},\"eventFilterPathPatterns\":{\"document\":\"*\"}} to {\"eventType\":\"google.cloud.firestore.document.v1.written\",\"eventFilters\":{\"database\":\"(default)\",\"namespace\":\"(default)\"},\"eventFilterPathPatterns\":{\"document\":\"posts/{postId}\"}}"}}
[debug] [2024-06-15T23:07:37.759Z] Found a v2 firestore trigger.
[debug] [2024-06-15T23:07:37.759Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"posts/{postId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:07:37.759Z] >>> [apiv2][query] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 [none]
[debug] [2024-06-15T23:07:37.759Z] >>> [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"posts/{postId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:07:37.762Z] Jun 16, 2024 6:07:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:37.775Z] <<< [apiv2][status] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 200
[debug] [2024-06-15T23:07:37.776Z] <<< [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 {"eventType":"google.cloud.firestore.document.v1.written","database":"(default)","namespace":"(default)","document":{"value":"posts/{postId}","matchType":"PATH_PATTERN"}}
[info] ✔  functions[us-central1-postTriggerToUpdateRedisDb]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:07:41.085Z] Definition for trigger postTriggerToUpdateRedisDb changed from {"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"posts/{postId}"}} to {"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{}/{postId}"}} {"metadata":{"emulator":{"name":"functions"},"message":"Definition for trigger postTriggerToUpdateRedisDb changed from {\"eventType\":\"google.cloud.firestore.document.v1.written\",\"eventFilters\":{\"database\":\"(default)\",\"namespace\":\"(default)\"},\"eventFilterPathPatterns\":{\"document\":\"posts/{postId}\"}} to {\"eventType\":\"google.cloud.firestore.document.v1.written\",\"eventFilters\":{\"database\":\"(default)\",\"namespace\":\"(default)\"},\"eventFilterPathPatterns\":{\"document\":\"{}/{postId}\"}}"}}
[debug] [2024-06-15T23:07:41.085Z] Found a v2 firestore trigger.
[debug] [2024-06-15T23:07:41.085Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"{}/{postId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:07:41.085Z] >>> [apiv2][query] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 [none]
[debug] [2024-06-15T23:07:41.085Z] >>> [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"{}/{postId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:07:41.088Z] Jun 16, 2024 6:07:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:41.097Z] <<< [apiv2][status] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 200
[debug] [2024-06-15T23:07:41.098Z] <<< [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 {"eventType":"google.cloud.firestore.document.v1.written","database":"(default)","namespace":"(default)","document":{"value":"{}/{postId}","matchType":"PATH_PATTERN"}}
[info] ✔  functions[us-central1-postTriggerToUpdateRedisDb]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2024-06-15T23:07:41.772Z] Jun 16, 2024 6:07:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:41.773Z] Jun 16, 2024 6:07:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jun 16, 2024 6:07:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJun 16, 2024 6:07:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:07:44.850Z] Definition for trigger postTriggerToUpdateRedisDb changed from {"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{}/{postId}"}} to {"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"}} {"metadata":{"emulator":{"name":"functions"},"message":"Definition for trigger postTriggerToUpdateRedisDb changed from {\"eventType\":\"google.cloud.firestore.document.v1.written\",\"eventFilters\":{\"database\":\"(default)\",\"namespace\":\"(default)\"},\"eventFilterPathPatterns\":{\"document\":\"{}/{postId}\"}} to {\"eventType\":\"google.cloud.firestore.document.v1.written\",\"eventFilters\":{\"database\":\"(default)\",\"namespace\":\"(default)\"},\"eventFilterPathPatterns\":{\"document\":\"{collectionId}/{postId}\"}}"}}
[debug] [2024-06-15T23:07:44.850Z] Found a v2 firestore trigger.
[debug] [2024-06-15T23:07:44.850Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"{collectionId}/{postId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:07:44.851Z] >>> [apiv2][query] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 [none]
[debug] [2024-06-15T23:07:44.851Z] >>> [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"{collectionId}/{postId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:07:44.860Z] Jun 16, 2024 6:07:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:44.881Z] <<< [apiv2][status] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 200
[debug] [2024-06-15T23:07:44.881Z] <<< [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 {"eventType":"google.cloud.firestore.document.v1.written","database":"(default)","namespace":"(default)","document":{"value":"{collectionId}/{postId}","matchType":"PATH_PATTERN"}}
[info] ✔  functions[us-central1-postTriggerToUpdateRedisDb]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:07:46.611Z] Definition for trigger postTriggerToUpdateRedisDb changed from {"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{postId}"}} to {"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"}} {"metadata":{"emulator":{"name":"functions"},"message":"Definition for trigger postTriggerToUpdateRedisDb changed from {\"eventType\":\"google.cloud.firestore.document.v1.written\",\"eventFilters\":{\"database\":\"(default)\",\"namespace\":\"(default)\"},\"eventFilterPathPatterns\":{\"document\":\"{collectionId}/{postId}\"}} to {\"eventType\":\"google.cloud.firestore.document.v1.written\",\"eventFilters\":{\"database\":\"(default)\",\"namespace\":\"(default)\"},\"eventFilterPathPatterns\":{\"document\":\"{collectionId}/{docId}\"}}"}}
[debug] [2024-06-15T23:07:46.611Z] Found a v2 firestore trigger.
[debug] [2024-06-15T23:07:46.612Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"{collectionId}/{docId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:07:46.612Z] >>> [apiv2][query] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 [none]
[debug] [2024-06-15T23:07:46.612Z] >>> [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"{collectionId}/{docId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2024-06-15T23:07:46.614Z] Jun 16, 2024 6:07:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:07:46.640Z] <<< [apiv2][status] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 200
[debug] [2024-06-15T23:07:46.640Z] <<< [apiv2][body] POST http://127.0.0.1:4002/emulator/v1/projects/sucmanh2000-2b5f0/eventarcTrigger?eventarcTriggerId=us-central1-postTriggerToUpdateRedisDb-0 {"eventType":"google.cloud.firestore.document.v1.written","database":"(default)","namespace":"(default)","document":{"value":"{collectionId}/{docId}","matchType":"PATH_PATTERN"}}
[info] ✔  functions[us-central1-postTriggerToUpdateRedisDb]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2024-06-15T23:07:57.796Z] Jun 16, 2024 6:07:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:07:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:09.590Z] Jun 16, 2024 6:08:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jun 16, 2024 6:08:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jun 16, 2024 6:08:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJun 16, 2024 6:08:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJun 16, 2024 6:08:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:11.996Z] Jun 16, 2024 6:08:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:12.002Z] Jun 16, 2024 6:08:12 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:12 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2024-06-15T23:08:12.015Z] Jun 16, 2024 6:08:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:13.802Z] Jun 16, 2024 6:08:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:13.802Z] Jun 16, 2024 6:08:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:16.314Z] Jun 16, 2024 6:08:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:16.329Z] Jun 16, 2024 6:08:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:16.362Z] Jun 16, 2024 6:08:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:16.400Z] [work-queue] {"queuedWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:08:16.400Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:08:16.400Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:08:16.400Z"],"workRunningCount":1}
[debug] [2024-06-15T23:08:16.401Z] Accepted request POST /functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0 --> us-central1-postTriggerToUpdateRedisDb-0
[debug] [2024-06-15T23:08:16.404Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T23:08:16.404Z] [functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/"}}
[debug] [2024-06-15T23:08:16.405Z] [worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:08:16.407Z] [worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:08:16.407Z] [worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1"}}
[debug] [2024-06-15T23:08:16.798Z] Jun 16, 2024 6:08:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:17.057Z] [runtime-status] [39751] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:08:17.057Z] [runtime-status] [39751] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:08:17.058Z] [runtime-status] [39751] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T23:08:17.058Z] [runtime-status] [39751] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:08:17.195Z] [runtime-status] [39751] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T23:08:17.195Z] [runtime-status] [39751] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T23:08:17.195Z] [runtime-status] [39751] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:08:17.196Z] [runtime-status] [39751] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:08:17.197Z] [runtime-status] [39751] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:08:17.197Z] [runtime-status] [39751] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T23:08:17.273Z] [runtime-status] [39751] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:08:17.376Z] [runtime-status] [39751] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T23:08:17.379Z] [runtime-status] [39751] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_ca4206edd8a4c79d.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_ca4206edd8a4c79d.sock"}}
[debug] [2024-06-15T23:08:17.423Z] [worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: IDLE"}}
[debug] [2024-06-15T23:08:17.423Z] [worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb)"}}
[info] i  functions: Beginning execution of "us-central1-postTriggerToUpdateRedisDb" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Beginning execution of \"us-central1-postTriggerToUpdateRedisDb\""}}
[debug] [2024-06-15T23:08:17.423Z] [worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: BUSY"}}
[debug] [2024-06-15T23:08:17.426Z] [runtime-status] [39751] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)","id":"b0085029-3224-4dae-bab4-3999fd7e8eba","subject":"documents/testt/L7iHzNpMRRnQEd1ESYva","time":"2024-06-15T23:08:16Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"sucmanh2000-2b5f0","database":"(default)","namespace":"(default)","document":"testt/L7iHzNpMRRnQEd1ESYva","data":{"type":"Buffer","data":[10,231,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,18,13,10,2,104,97,18,7,138,1,4,97,101,114,102,18,13,10,3,111,107,101,18,6,138,1,3,109,195,161,18,21,10,3,99,116,97,18,14,138,1,11,99,117,97,32,113,117,97,32,107,104,117,18,11,10,1,49,18,6,138,1,3,101,101,119,18,16,10,6,111,107,101,101,103,101,18,6,138,1,3,109,106,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,224,189,184,179,6,16,152,218,225,179,1,18,213,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,18,13,10,2,104,97,18,7,138,1,4,97,101,114,102,18,13,10,3,111,107,101,18,6,138,1,3,109,195,161,18,21,10,3,99,116,97,18,14,138,1,11,99,117,97,32,113,117,97,32,107,104,117,18,11,10,1,49,18,6,138,1,3,101,101,119,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,159,189,184,179,6,16,240,230,128,210,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39751] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)\",\"id\":\"b0085029-3224-4dae-bab4-3999fd7e8eba\",\"subject\":\"documents/testt/L7iHzNpMRRnQEd1ESYva\",\"time\":\"2024-06-15T23:08:16Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"sucmanh2000-2b5f0\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"testt/L7iHzNpMRRnQEd1ESYva\",\"data\":{\"type\":\"Buffer\",\"data\":[10,231,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,18,13,10,2,104,97,18,7,138,1,4,97,101,114,102,18,13,10,3,111,107,101,18,6,138,1,3,109,195,161,18,21,10,3,99,116,97,18,14,138,1,11,99,117,97,32,113,117,97,32,107,104,117,18,11,10,1,49,18,6,138,1,3,101,101,119,18,16,10,6,111,107,101,101,103,101,18,6,138,1,3,109,106,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,224,189,184,179,6,16,152,218,225,179,1,18,213,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,18,13,10,2,104,97,18,7,138,1,4,97,101,114,102,18,13,10,3,111,107,101,18,6,138,1,3,109,195,161,18,21,10,3,99,116,97,18,14,138,1,11,99,117,97,32,113,117,97,32,107,104,117,18,11,10,1,49,18,6,138,1,3,101,101,119,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,159,189,184,179,6,16,240,230,128,210,3,26,0]}}"}}
[info] >  { collectionId: 'testt', docId: 'L7iHzNpMRRnQEd1ESYva' } {"user":"{ collectionId: 'testt', docId: 'L7iHzNpMRRnQEd1ESYva' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m { collectionId: 'testt', docId: 'L7iHzNpMRRnQEd1ESYva' }"}}
[debug] [2024-06-15T23:08:17.430Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-postTriggerToUpdateRedisDb" in 6.356667ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finished \"us-central1-postTriggerToUpdateRedisDb\" in 6.356667ms"}}
[debug] [2024-06-15T23:08:17.430Z] [worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: IDLE"}}
[debug] [2024-06-15T23:08:17.430Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T23:08:17.430Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T23:08:17.430Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:08:23.834Z] Jun 16, 2024 6:08:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:23.834Z] Jun 16, 2024 6:08:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:25.859Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:08:26.827Z] Jun 16, 2024 6:08:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:26.860Z] Validating nodejs source
[debug] [2024-06-15T23:08:27.630Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:08:27.630Z] Building nodejs source
[debug] [2024-06-15T23:08:27.630Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:08:27.631Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:08:27.631Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:08:27.632Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8678

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:08:27.979Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:08:28.633Z] Validating nodejs source
[debug] [2024-06-15T23:08:29.336Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:08:29.336Z] Building nodejs source
[debug] [2024-06-15T23:08:29.336Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:08:29.336Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:08:29.337Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8065

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:08:29.566Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:08:33.866Z] Jun 16, 2024 6:08:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:33.867Z] Jun 16, 2024 6:08:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:36.853Z] Jun 16, 2024 6:08:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:08:37.997Z] [worker-pool] Shutting down IDLE worker (us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:08:37.997Z] [worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: FINISHING"}}
[debug] [2024-06-15T23:08:38.002Z] [worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: exited"}}
[debug] [2024-06-15T23:08:38.002Z] [worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-1b99c839-e0aa-4153-87bf-e5f4fe2a8fca]: FINISHED"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:08:43.893Z] Jun 16, 2024 6:08:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:43.894Z] Jun 16, 2024 6:08:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:44.385Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:08:45.387Z] Validating nodejs source
[debug] [2024-06-15T23:08:46.374Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:08:46.375Z] Building nodejs source
[debug] [2024-06-15T23:08:46.375Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:08:46.376Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:08:46.377Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8185

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:08:46.745Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:08:46.870Z] Jun 16, 2024 6:08:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:47.798Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:08:48.800Z] Validating nodejs source
[debug] [2024-06-15T23:08:49.727Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:08:49.727Z] Building nodejs source
[debug] [2024-06-15T23:08:49.727Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:08:49.728Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:08:49.728Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8114

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:08:50.022Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:08:50.300Z] Jun 16, 2024 6:08:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:50.301Z] Jun 16, 2024 6:08:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:52.011Z] Jun 16, 2024 6:08:52 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:52 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:52.045Z] [work-queue] {"queuedWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:08:52.045Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:08:52.046Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:08:52.045Z"],"workRunningCount":1}
[debug] [2024-06-15T23:08:52.046Z] Accepted request POST /functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0 --> us-central1-postTriggerToUpdateRedisDb-0
[debug] [2024-06-15T23:08:52.048Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T23:08:52.048Z] [functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/"}}
[debug] [2024-06-15T23:08:52.049Z] [worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:08:52.050Z] [worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:08:52.050Z] [worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1"}}
[debug] [2024-06-15T23:08:52.621Z] [runtime-status] [39883] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:08:52.622Z] [runtime-status] [39883] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:08:52.622Z] [runtime-status] [39883] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T23:08:52.622Z] [runtime-status] [39883] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:08:52.690Z] [runtime-status] [39883] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T23:08:52.690Z] [runtime-status] [39883] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T23:08:52.690Z] [runtime-status] [39883] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:08:52.691Z] [runtime-status] [39883] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:08:52.691Z] [runtime-status] [39883] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:08:52.691Z] [runtime-status] [39883] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T23:08:52.733Z] [runtime-status] [39883] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:08:52.808Z] [runtime-status] [39883] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T23:08:52.809Z] [runtime-status] [39883] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_1c82da867820bd37.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_1c82da867820bd37.sock"}}
[debug] [2024-06-15T23:08:52.863Z] [worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: IDLE"}}
[debug] [2024-06-15T23:08:52.863Z] [worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb)"}}
[info] i  functions: Beginning execution of "us-central1-postTriggerToUpdateRedisDb" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Beginning execution of \"us-central1-postTriggerToUpdateRedisDb\""}}
[debug] [2024-06-15T23:08:52.864Z] [worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: BUSY"}}
[debug] [2024-06-15T23:08:52.866Z] [runtime-status] [39883] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)","id":"9f858f6d-a853-4e98-aa3f-43d357c96e97","subject":"documents/testt/L7iHzNpMRRnQEd1ESYva","time":"2024-06-15T23:08:52Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"sucmanh2000-2b5f0","database":"(default)","namespace":"(default)","document":"testt/L7iHzNpMRRnQEd1ESYva","data":{"type":"Buffer","data":[10,214,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,13,10,2,104,97,18,7,138,1,4,97,101,114,102,18,13,10,3,111,107,101,18,6,138,1,3,109,195,161,18,21,10,3,99,116,97,18,14,138,1,11,99,117,97,32,113,117,97,32,107,104,117,18,11,10,1,49,18,6,138,1,3,101,101,119,18,16,10,6,111,107,101,101,103,101,18,6,138,1,3,109,106,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,11,8,132,190,184,179,6,16,240,255,190,12,18,231,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,18,13,10,2,104,97,18,7,138,1,4,97,101,114,102,18,13,10,3,111,107,101,18,6,138,1,3,109,195,161,18,21,10,3,99,116,97,18,14,138,1,11,99,117,97,32,113,117,97,32,107,104,117,18,11,10,1,49,18,6,138,1,3,101,101,119,18,16,10,6,111,107,101,101,103,101,18,6,138,1,3,109,106,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,224,189,184,179,6,16,152,218,225,179,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [39883] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)\",\"id\":\"9f858f6d-a853-4e98-aa3f-43d357c96e97\",\"subject\":\"documents/testt/L7iHzNpMRRnQEd1ESYva\",\"time\":\"2024-06-15T23:08:52Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"sucmanh2000-2b5f0\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"testt/L7iHzNpMRRnQEd1ESYva\",\"data\":{\"type\":\"Buffer\",\"data\":[10,214,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,13,10,2,104,97,18,7,138,1,4,97,101,114,102,18,13,10,3,111,107,101,18,6,138,1,3,109,195,161,18,21,10,3,99,116,97,18,14,138,1,11,99,117,97,32,113,117,97,32,107,104,117,18,11,10,1,49,18,6,138,1,3,101,101,119,18,16,10,6,111,107,101,101,103,101,18,6,138,1,3,109,106,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,11,8,132,190,184,179,6,16,240,255,190,12,18,231,1,10,83,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,116,101,115,116,116,47,76,55,105,72,122,78,112,77,82,82,110,81,69,100,49,69,83,89,118,97,18,16,10,4,111,107,101,97,18,8,138,1,5,104,97,97,97,97,18,14,10,5,111,108,97,108,97,18,5,138,1,2,101,101,18,13,10,2,104,97,18,7,138,1,4,97,101,114,102,18,13,10,3,111,107,101,18,6,138,1,3,109,195,161,18,21,10,3,99,116,97,18,14,138,1,11,99,117,97,32,113,117,97,32,107,104,117,18,11,10,1,49,18,6,138,1,3,101,101,119,18,16,10,6,111,107,101,101,103,101,18,6,138,1,3,109,106,97,26,12,8,194,187,184,179,6,16,184,194,235,148,3,34,12,8,224,189,184,179,6,16,152,218,225,179,1,26,0]}}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    collectionId: 'testt', {"user":"  collectionId: 'testt',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   collectionId: 'testt',"}}
[info] >    docId: 'L7iHzNpMRRnQEd1ESYva', {"user":"  docId: 'L7iHzNpMRRnQEd1ESYva',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   docId: 'L7iHzNpMRRnQEd1ESYva',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      '1': 'eew', {"user":"    '1': 'eew',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     '1': 'eew',"}}
[info] >      okea: 'haaaa', {"user":"    okea: 'haaaa',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     okea: 'haaaa',"}}
[info] >      ha: 'aerf', {"user":"    ha: 'aerf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     ha: 'aerf',"}}
[info] >      oke: 'má', {"user":"    oke: 'má',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     oke: 'má',"}}
[info] >      cta: 'cua qua khu', {"user":"    cta: 'cua qua khu',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     cta: 'cua qua khu',"}}
[info] >      okeege: 'mja' {"user":"    okeege: 'mja'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m     okeege: 'mja'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:08:52.870Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-postTriggerToUpdateRedisDb" in 6.592959ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finished \"us-central1-postTriggerToUpdateRedisDb\" in 6.592959ms"}}
[debug] [2024-06-15T23:08:52.870Z] [worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: IDLE"}}
[debug] [2024-06-15T23:08:52.870Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T23:08:52.870Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T23:08:52.870Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:08:53.915Z] Jun 16, 2024 6:08:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:08:53.917Z] Jun 16, 2024 6:08:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:08:56.764Z] [worker-pool] Shutting down IDLE worker (us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:08:56.764Z] [worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: FINISHING"}}
[debug] [2024-06-15T23:08:56.773Z] [worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: exited"}}
[debug] [2024-06-15T23:08:56.773Z] [worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-c48ba2f2-5883-48fd-a083-0c2e0e208640]: FINISHED"}}
[debug] [2024-06-15T23:08:56.895Z] Jun 16, 2024 6:08:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:08:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:09:03.944Z] Jun 16, 2024 6:09:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:03.944Z] Jun 16, 2024 6:09:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:06.920Z] Jun 16, 2024 6:09:06 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:06 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:13.972Z] Jun 16, 2024 6:09:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:13.973Z] Jun 16, 2024 6:09:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:16.946Z] Jun 16, 2024 6:09:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:22.055Z] Jun 16, 2024 6:09:22 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:22 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:22.055Z] Jun 16, 2024 6:09:22 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:22 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:24.001Z] Jun 16, 2024 6:09:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:24.002Z] Jun 16, 2024 6:09:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:26.977Z] Jun 16, 2024 6:09:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:34.032Z] Jun 16, 2024 6:09:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:34.032Z] Jun 16, 2024 6:09:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:37.012Z] Jun 16, 2024 6:09:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:44.065Z] Jun 16, 2024 6:09:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:44.065Z] Jun 16, 2024 6:09:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:47.038Z] Jun 16, 2024 6:09:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:52.058Z] Jun 16, 2024 6:09:52 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:52 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:52.075Z] Jun 16, 2024 6:09:52 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:52 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2024-06-15T23:09:54.099Z] Jun 16, 2024 6:09:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:54.099Z] Jun 16, 2024 6:09:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:56.370Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:09:57.076Z] Jun 16, 2024 6:09:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:09:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:09:57.373Z] Validating nodejs source
[debug] [2024-06-15T23:09:58.950Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:09:58.950Z] Building nodejs source
[debug] [2024-06-15T23:09:58.950Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:09:58.951Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:09:58.952Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8119

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:09:59.336Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:10:04.139Z] Jun 16, 2024 6:10:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:04.143Z] Jun 16, 2024 6:10:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:07.141Z] Jun 16, 2024 6:10:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:10:11.326Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:10:12.328Z] Validating nodejs source
[debug] [2024-06-15T23:10:13.086Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:10:13.086Z] Building nodejs source
[debug] [2024-06-15T23:10:13.086Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:10:13.087Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:10:13.087Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8894

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:10:13.466Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:10:14.159Z] Jun 16, 2024 6:10:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:14.169Z] Jun 16, 2024 6:10:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:17.157Z] Jun 16, 2024 6:10:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:22.080Z] Jun 16, 2024 6:10:22 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:22 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:22.924Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:10:23.927Z] Validating nodejs source
[debug] [2024-06-15T23:10:24.571Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:10:24.571Z] Building nodejs source
[debug] [2024-06-15T23:10:24.571Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:10:24.572Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:10:24.573Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T23:10:24.573Z] Jun 16, 2024 6:10:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] Serving at port 8530

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:10:24.906Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:10:27.173Z] Jun 16, 2024 6:10:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:28.386Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:10:29.387Z] Validating nodejs source
[debug] [2024-06-15T23:10:29.965Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:10:29.965Z] Building nodejs source
[debug] [2024-06-15T23:10:29.965Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:10:29.966Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:10:29.966Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:10:29.966Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8187

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:10:30.333Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:10:30.966Z] Validating nodejs source
[debug] [2024-06-15T23:10:31.629Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:10:31.629Z] Building nodejs source
[debug] [2024-06-15T23:10:31.629Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:10:31.630Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:10:31.630Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8043

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:10:31.876Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:10:34.069Z] Jun 16, 2024 6:10:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:34.069Z] Jun 16, 2024 6:10:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jun 16, 2024 6:10:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJun 16, 2024 6:10:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:10:37.184Z] Jun 16, 2024 6:10:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:10:44.194Z] Jun 16, 2024 6:10:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:47.197Z] Jun 16, 2024 6:10:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:51.140Z] Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:51.156Z] Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:51.166Z] Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:51.190Z] [work-queue] {"queuedWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:10:51.190Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:10:51.190Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:10:51.190Z"],"workRunningCount":1}
[debug] [2024-06-15T23:10:51.190Z] Accepted request POST /functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0 --> us-central1-postTriggerToUpdateRedisDb-0
[debug] [2024-06-15T23:10:51.193Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T23:10:51.193Z] [functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/"}}
[debug] [2024-06-15T23:10:51.193Z] [worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:10:51.195Z] [worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:10:51.196Z] [worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1"}}
[debug] [2024-06-15T23:10:51.242Z] Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:51.321Z] Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:51.373Z] Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:10:51.981Z] [runtime-status] [40143] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:10:51.982Z] [runtime-status] [40143] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:10:51.983Z] [runtime-status] [40143] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T23:10:51.983Z] [runtime-status] [40143] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:10:52.115Z] [runtime-status] [40143] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T23:10:52.115Z] [runtime-status] [40143] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T23:10:52.115Z] [runtime-status] [40143] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:10:52.115Z] [runtime-status] [40143] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:10:52.116Z] [runtime-status] [40143] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:10:52.117Z] [runtime-status] [40143] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-06-15T23:10:52.184Z] [runtime-status] [40143] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:10:52.293Z] [runtime-status] [40143] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T23:10:52.295Z] [runtime-status] [40143] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_2410d944dd88cf69.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_2410d944dd88cf69.sock"}}
[debug] [2024-06-15T23:10:52.315Z] [worker-us-central1-postTriggerToUpdateRedisDb-a3f04391-b267-4901-9ef0-dc238f083784]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-a3f04391-b267-4901-9ef0-dc238f083784]: IDLE"}}
[debug] [2024-06-15T23:10:52.316Z] [worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb)"}}
[info] i  functions: Beginning execution of "us-central1-postTriggerToUpdateRedisDb" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Beginning execution of \"us-central1-postTriggerToUpdateRedisDb\""}}
[debug] [2024-06-15T23:10:52.316Z] [worker-us-central1-postTriggerToUpdateRedisDb-a3f04391-b267-4901-9ef0-dc238f083784]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-a3f04391-b267-4901-9ef0-dc238f083784]: BUSY"}}
[debug] [2024-06-15T23:10:52.326Z] [runtime-status] [40143] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)","id":"99c34e38-881f-4d2d-a43f-8c3c0bce9c3b","subject":"documents/post-test/test-post","time":"2024-06-15T23:10:51Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"sucmanh2000-2b5f0","database":"(default)","namespace":"(default)","document":"post-test/test-post","data":{"type":"Buffer","data":[10,133,1,10,76,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,112,111,115,116,45,116,101,115,116,47,116,101,115,116,45,112,111,115,116,18,27,10,4,110,97,109,101,18,19,138,1,16,104,97,104,97,104,97,32,99,104,195,186,110,103,32,116,97,26,11,8,251,190,184,179,6,16,168,209,167,83,34,11,8,251,190,184,179,6,16,168,209,167,83,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40143] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)\",\"id\":\"99c34e38-881f-4d2d-a43f-8c3c0bce9c3b\",\"subject\":\"documents/post-test/test-post\",\"time\":\"2024-06-15T23:10:51Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"sucmanh2000-2b5f0\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"post-test/test-post\",\"data\":{\"type\":\"Buffer\",\"data\":[10,133,1,10,76,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,112,111,115,116,45,116,101,115,116,47,116,101,115,116,45,112,111,115,116,18,27,10,4,110,97,109,101,18,19,138,1,16,104,97,104,97,104,97,32,99,104,195,186,110,103,32,116,97,26,11,8,251,190,184,179,6,16,168,209,167,83,34,11,8,251,190,184,179,6,16,168,209,167,83,26,0]}}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    collectionId: 'post-test', {"user":"  collectionId: 'post-test',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   collectionId: 'post-test',"}}
[info] >    docId: 'test-post', {"user":"  docId: 'test-post',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   docId: 'test-post',"}}
[info] >    data: { name: 'hahaha chúng ta' } {"user":"  data: { name: 'hahaha chúng ta' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { name: 'hahaha chúng ta' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[warn] ⚠  functions: ReferenceError: indexingDataforSearch is not defined
    at /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:14:5
    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/common/onInit.js:33:16
    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/trace.js:16:28
    at func (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/providers/firestore.js:316:78)
    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:524:16
    at runFunction (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runCloudEvent (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:523:11)
    at processBackground (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:490:16)
    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"ReferenceError: indexingDataforSearch is not defined\n    at /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js:14:5\n    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/common/onInit.js:33:16\n    at /Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/trace.js:16:28\n    at func (/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v2/providers/firestore.js:316:78)\n    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:524:16\n    at runFunction (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runCloudEvent (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:523:11)\n    at processBackground (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:490:16)\n    at /Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/Users/hacthe/.nvm/versions/node/v18.17.1/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2024-06-15T23:10:52.335Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:10:52.335Z] [worker-us-central1-postTriggerToUpdateRedisDb-a3f04391-b267-4901-9ef0-dc238f083784]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-a3f04391-b267-4901-9ef0-dc238f083784]: exited"}}
[debug] [2024-06-15T23:10:52.335Z] [worker-us-central1-postTriggerToUpdateRedisDb-a3f04391-b267-4901-9ef0-dc238f083784]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-a3f04391-b267-4901-9ef0-dc238f083784]: FINISHED"}}
[debug] [2024-06-15T23:10:52.342Z] Jun 16, 2024 6:10:52 AM com.google.cloud.datastore.emulator.impl.events.FunctionsEmulatorEventPublisher sendHttpRequestV2
WARNING: Unsuccessful HTTP response when publishing v2 event for projects/sucmanh2000-2b5f0/eventarcTriggers/us-central1-postTriggerToUpdateRedisDb-0: 500 Internal Server Error
POST http://127.0.0.1:4003/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0
{"code":"ECONNRESET"}
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:52 AM com.google.cloud.datastore.emulator.impl.events.FunctionsEmulatorEventPublisher sendHttpRequestV2\nWARNING: Unsuccessful HTTP response when publishing v2 event for projects/sucmanh2000-2b5f0/eventarcTriggers/us-central1-postTriggerToUpdateRedisDb-0: 500 Internal Server Error\nPOST http://127.0.0.1:4003/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0\n{\"code\":\"ECONNRESET\"}\n"}}
[debug] [2024-06-15T23:10:57.212Z] Jun 16, 2024 6:10:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:10:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:01.345Z] Jun 16, 2024 6:11:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:05.449Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:11:06.450Z] Validating nodejs source
[debug] [2024-06-15T23:11:07.151Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:11:07.151Z] Building nodejs source
[debug] [2024-06-15T23:11:07.151Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:11:07.152Z] File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/triggers/postWrite.js changed, reloading triggers"}}
[debug] [2024-06-15T23:11:07.153Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:11:07.153Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[debug] [2024-06-15T23:11:07.232Z] Jun 16, 2024 6:11:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] Serving at port 8523

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:11:07.568Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:11:08.155Z] Validating nodejs source
[debug] [2024-06-15T23:11:08.713Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:11:08.713Z] Building nodejs source
[debug] [2024-06-15T23:11:08.713Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:11:08.714Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:11:08.714Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8429

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:11:08.953Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:11:09.504Z] Jun 16, 2024 6:11:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:09.504Z] Jun 16, 2024 6:11:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:10.181Z] Jun 16, 2024 6:11:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:10.250Z] Jun 16, 2024 6:11:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:13.971Z] Jun 16, 2024 6:11:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:13.997Z] [work-queue] {"queuedWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:11:13.997Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:11:13.997Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0-2024-06-15T23:11:13.997Z"],"workRunningCount":1}
[debug] [2024-06-15T23:11:13.998Z] Accepted request POST /functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0 --> us-central1-postTriggerToUpdateRedisDb-0
[debug] [2024-06-15T23:11:13.999Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-06-15T23:11:13.999Z] [functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/sucmanh2000-2b5f0/triggers/us-central1-postTriggerToUpdateRedisDb-0, mapping to path=/functions/projects/"}}
[debug] [2024-06-15T23:11:13.999Z] [worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-postTriggerToUpdateRedisDb: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:11:14.000Z] [worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:11:14.000Z] [worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-postTriggerToUpdateRedisDb, total=1"}}
[debug] [2024-06-15T23:11:14.582Z] [runtime-status] [40206] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:11:14.582Z] [runtime-status] [40206] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:11:14.582Z] [runtime-status] [40206] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-06-15T23:11:14.583Z] [runtime-status] [40206] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:11:14.651Z] [runtime-status] [40206] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-06-15T23:11:14.651Z] [runtime-status] [40206] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-06-15T23:11:14.651Z] [runtime-status] [40206] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:11:14.651Z] [runtime-status] [40206] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-06-15T23:11:14.652Z] [runtime-status] [40206] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-06-15T23:11:14.652Z] [runtime-status] [40206] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.0","resolution":"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.0\",\"resolution\":\"/Users/hacthe/project/sucmanh2000/server/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784' {"user":"  REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   REDIS_URL: 'redis://default:8xbGVbUUVgIiD7a3HsgvHcSiUFWSsNyo@redis-12784.c1.asia-northeast1-1.gce.redns.redis-cloud.com:12784'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:11:14.711Z] [runtime-status] [40206] initializeApp(DEFAULT) {"credential":{"implicit":false,"projectId":"savvy-serenity-424116-g1","privateKey":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\nuMGTgOwOmaCYUmJW0Of2lVg=\n-----END PRIVATE KEY-----\n","clientEmail":"savvy-serenity-424116-g1@appspot.gserviceaccount.com","httpClient":{"retry":{"maxRetries":4,"statusCodes":[503],"ioErrorCodes":["ECONNRESET","ETIMEDOUT"],"backOffFactor":0.5,"maxDelayInMillis":60000}}},"storageBucket":"gs://savvy-serenity-424116-g1.appspot.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] initializeApp(DEFAULT) {\"credential\":{\"implicit\":false,\"projectId\":\"savvy-serenity-424116-g1\",\"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5OqVL0LiHqPz9\\nyWtREtWHeyX3ERV1bqaOuNlSYP8WJUqofkaxXsVer5Hlycp2aoTyMl88RgWKHFoF\\nJoqMaGrF/WLKTRDsjX3ptTV4YwMGmBeW9DWIX07nML+Q+jC45gJlznSTsSRX1GbZ\\n9qBkXahdogzQrb2Ou1tqCL2qX6eQs0X8w9odYBpezHweNJ0+rMgqo8QRYc9hZgml\\nGRWbjdXgRvyOm2zww+Z0cEFUwQBXqkItwuDrbvMRV7CdriIZvzM3qIT41OJ2fC0p\\nm95OxUYxMQ7tFlg6XyBbyMaqVoNe0qnsbCKRjcBNrktMeowwP/46XJp6B9snje2e\\nu0OdFkwfAgMBAAECggEACwXOaGCXWptX0tJ1rHFue418iONfX4miJ8QgSqKzC2JU\\nuwooss1s+WGBUSddAQb9ulv9Bt0z3zAouz276Pcdw4J8qoVDiJAy+gFqmStrNq0+\\nWiFWPjNNwrxH6hy5YYduhRhwH4nfG8rsA/SFPvPD3S6TjKeKLEBCBGFYyBbBJf8q\\n4p/1Ck1iWjLJvqElQPgvc6/6+bdr6osnyTicti7FnIBQjOv750Vy3gnYdAtulrkc\\ngxTIm2HFwBt0yQyg2eZNJ5HosG/kHXV8bo9tNbvYMpYsE+s6oqX0tl+5qp8xw/ml\\nFb2lE/9LpTVRINpAPxLUC8Qkv5hPvmrvKsiKZSty4QKBgQD+sZHAGbQpjGkwjlk5\\nQMbUBMF7K0lHUUO4x+ySpIrhX0TXbu2YF1OovL/eVvAnIrnsOavrV6xcm2aIdKgy\\nDRTb+lyskp80bcUNFGiTVQ9CPQXRSLlDupw7OoRIWP3kUlCgL1XJyYAT4qvchn+1\\nN5WVqMYW5mjc55sGoUBx/7aKkwKBgQC6Ld1Qve7aAZMV5+OJqYVNbZnno4KADp6e\\nS6/t6FeDpiqCxyjrepBlZfwaqYpO9OSSEWlsxTqBVQrUXn5UchIdnXTJzeJpJ1SK\\nJ9oJQhwGrrJJUfbGZPDivsb8Mcgvg3z60BNGCBgzFJAQXtU4jum+hPjxFUIWwG3w\\n2tcp/JBTxQKBgGMvX6VB3Ul45tYD+Xc0ZLnYiEihGM5vNUJWiSiqb3NJGJQVHO3n\\n16qUptu9W5TCD0mRRARIhlUiJ5HobD/hnEf2ffSuvNU8Ekr/saH+tAyFmyhfe9aG\\na6UdKrrJ/UXXUJKxHGWS1Q/pbChbMIyv8s7vhQUSAbBVeafhUCmU/c+FAoGAbd/l\\nbeI5lPU67cGlejfOUMyu+JJ50MNP/xGh6SCmjS5Chl2tG5OApibS6pVF56UFQ+L8\\nudGH3o3mz0BZA9MyN8IWC4by6KXqcYJlXfNjANqWo0i4/4rQ0rBOVMW4Y7oQxyCH\\nT1w1k+e9wbuF0FQfRG3LUNP/5dd4yp0MQF4qexUCgYEA8jbKpQ9zZRnWQq1gdbcE\\nmSkYcd39ZbyncjNry4JWoneqsxcE9g9LqinuZWlv4W2/G7R+2J31wrngdj7U8W9e\\nCRW38Q/jFzuACyF7bYOL8KqdwvvTxz1W94rBRrQqPBpK5LMPt2tOL9C7cbxIB30W\\nuMGTgOwOmaCYUmJW0Of2lVg=\\n-----END PRIVATE KEY-----\\n\",\"clientEmail\":\"savvy-serenity-424116-g1@appspot.gserviceaccount.com\",\"httpClient\":{\"retry\":{\"maxRetries\":4,\"statusCodes\":[503],\"ioErrorCodes\":[\"ECONNRESET\",\"ETIMEDOUT\"],\"backOffFactor\":0.5,\"maxDelayInMillis\":60000}}},\"storageBucket\":\"gs://savvy-serenity-424116-g1.appspot.com\"}"}}
[debug] [2024-06-15T23:11:14.761Z] [runtime-status] [40206] Functions runtime initialized. {"cwd":"/Users/hacthe/project/sucmanh2000/server","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] Functions runtime initialized. {\"cwd\":\"/Users/hacthe/project/sucmanh2000/server\",\"node_version\":\"18.17.1\"}"}}
[debug] [2024-06-15T23:11:14.762Z] [runtime-status] [40206] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_eb1b62b07de62db4.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] Listening to port: /var/folders/6g/zc7sfnjj37z9k71njr07m5s40000gn/T/fire_emu_eb1b62b07de62db4.sock"}}
[debug] [2024-06-15T23:11:14.814Z] [worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: IDLE"}}
[debug] [2024-06-15T23:11:14.814Z] [worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-postTriggerToUpdateRedisDb)"}}
[info] i  functions: Beginning execution of "us-central1-postTriggerToUpdateRedisDb" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Beginning execution of \"us-central1-postTriggerToUpdateRedisDb\""}}
[debug] [2024-06-15T23:11:14.815Z] [worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: BUSY"}}
[debug] [2024-06-15T23:11:14.817Z] [runtime-status] [40206] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)","id":"d5e25ce1-bb92-4a6e-8c87-4bc9d354db98","subject":"documents/post-test/test-post","time":"2024-06-15T23:11:13Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"sucmanh2000-2b5f0","database":"(default)","namespace":"(default)","document":"post-test/test-post","data":{"type":"Buffer","data":[10,145,1,10,76,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,112,111,115,116,45,116,101,115,116,47,116,101,115,116,45,112,111,115,116,18,27,10,4,110,97,109,101,18,19,138,1,16,104,97,104,97,104,97,32,99,104,195,186,110,103,32,116,97,18,9,10,1,49,18,4,138,1,1,50,26,11,8,251,190,184,179,6,16,168,209,167,83,34,12,8,145,191,184,179,6,16,144,207,185,211,3,18,133,1,10,76,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,112,111,115,116,45,116,101,115,116,47,116,101,115,116,45,112,111,115,116,18,27,10,4,110,97,109,101,18,19,138,1,16,104,97,104,97,104,97,32,99,104,195,186,110,103,32,116,97,26,11,8,251,190,184,179,6,16,168,209,167,83,34,11,8,251,190,184,179,6,16,168,209,167,83,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[runtime-status] [40206] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/sucmanh2000-2b5f0/databases/(default)\",\"id\":\"d5e25ce1-bb92-4a6e-8c87-4bc9d354db98\",\"subject\":\"documents/post-test/test-post\",\"time\":\"2024-06-15T23:11:13Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"sucmanh2000-2b5f0\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"post-test/test-post\",\"data\":{\"type\":\"Buffer\",\"data\":[10,145,1,10,76,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,112,111,115,116,45,116,101,115,116,47,116,101,115,116,45,112,111,115,116,18,27,10,4,110,97,109,101,18,19,138,1,16,104,97,104,97,104,97,32,99,104,195,186,110,103,32,116,97,18,9,10,1,49,18,4,138,1,1,50,26,11,8,251,190,184,179,6,16,168,209,167,83,34,12,8,145,191,184,179,6,16,144,207,185,211,3,18,133,1,10,76,112,114,111,106,101,99,116,115,47,115,117,99,109,97,110,104,50,48,48,48,45,50,98,53,102,48,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,112,111,115,116,45,116,101,115,116,47,116,101,115,116,45,112,111,115,116,18,27,10,4,110,97,109,101,18,19,138,1,16,104,97,104,97,104,97,32,99,104,195,186,110,103,32,116,97,26,11,8,251,190,184,179,6,16,168,209,167,83,34,11,8,251,190,184,179,6,16,168,209,167,83,26,0]}}"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    collectionId: 'post-test', {"user":"  collectionId: 'post-test',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   collectionId: 'post-test',"}}
[info] >    docId: 'test-post', {"user":"  docId: 'test-post',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   docId: 'test-post',"}}
[info] >    data: { '1': '2', name: 'hahaha chúng ta' } {"user":"  data: { '1': '2', name: 'hahaha chúng ta' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { '1': '2', name: 'hahaha chúng ta' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-06-15T23:11:15.104Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-postTriggerToUpdateRedisDb" in 289.842292ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finished \"us-central1-postTriggerToUpdateRedisDb\" in 289.842292ms"}}
[debug] [2024-06-15T23:11:15.105Z] [worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: IDLE"}}
[debug] [2024-06-15T23:11:15.105Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-06-15T23:11:15.105Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-06-15T23:11:15.105Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-06-15T23:11:17.254Z] Jun 16, 2024 6:11:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:11:17.595Z] [worker-pool] Shutting down IDLE worker (us-central1-postTriggerToUpdateRedisDb) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-postTriggerToUpdateRedisDb)"}}
[debug] [2024-06-15T23:11:17.595Z] [worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: FINISHING"}}
[debug] [2024-06-15T23:11:17.597Z] [worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: exited"}}
[debug] [2024-06-15T23:11:17.598Z] [worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-postTriggerToUpdateRedisDb"},"extension":{},"message":"[worker-us-central1-postTriggerToUpdateRedisDb-73e98212-9419-49a8-9b80-13ad26739b19]: FINISHED"}}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:11:21.370Z] Jun 16, 2024 6:11:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:27.283Z] Jun 16, 2024 6:11:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:31.388Z] Jun 16, 2024 6:11:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:37.314Z] Jun 16, 2024 6:11:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:44.018Z] Jun 16, 2024 6:11:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:11:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:11:58.652Z] File /Users/hacthe/project/sucmanh2000/server/seed-redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/seed-redis.js changed, reloading triggers"}}
[debug] [2024-06-15T23:11:59.656Z] Validating nodejs source
[debug] [2024-06-15T23:12:00.340Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:12:00.340Z] Building nodejs source
[debug] [2024-06-15T23:12:00.340Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:12:00.342Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:12:00.342Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8705

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:12:00.752Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: app, postTriggerToUpdateRedisDb. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: app, postTriggerToUpdateRedisDb."}}
[debug] [2024-06-15T23:12:14.024Z] Jun 16, 2024 6:12:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:12:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:12:14.800Z] Jun 16, 2024 6:12:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:12:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-06-15T23:12:14.807Z] Jun 16, 2024 6:12:14 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 16, 2024 6:12:14 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2024-06-15T23:12:16.108Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T23:12:17.110Z] Validating nodejs source
[debug] [2024-06-15T23:12:17.743Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:12:17.743Z] Building nodejs source
[debug] [2024-06-15T23:12:17.743Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:12:17.744Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:12:17.744Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8470

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:12:18.016Z] File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/services/redis.js changed, reloading triggers"}}
[debug] [2024-06-15T23:12:18.098Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:12:19.018Z] Validating nodejs source
[debug] [2024-06-15T23:12:19.552Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:12:19.552Z] Building nodejs source
[debug] [2024-06-15T23:12:19.552Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:12:19.552Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:12:19.553Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8673

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:12:19.796Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-06-15T23:12:23.343Z] File /Users/hacthe/project/sucmanh2000/server/seed-redis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/hacthe/project/sucmanh2000/server/seed-redis.js changed, reloading triggers"}}
[debug] [2024-06-15T23:12:24.345Z] Validating nodejs source
[debug] [2024-06-15T23:12:24.945Z] > [functions] package.json contents: {
  "name": "server",
  "version": "1.0.0",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "server": "cp .env.local .env && nodemon index.js",
    "deploy:server": "cp .env.prod .env && firebase deploy --only functions"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "firebase": "^10.11.1",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.1",
    "ioredis": "^5.4.1",
    "lodash": "^4.17.21",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.0"
  }
}
[debug] [2024-06-15T23:12:24.945Z] Building nodejs source
[debug] [2024-06-15T23:12:24.945Z] Failed to find version of module node: reached end of search path /Users/hacthe/project/sucmanh2000/server/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "18". Using node@18 from host. 
[info] i  functions: Loaded environment variables from .env, .env.local. 
[debug] [2024-06-15T23:12:24.946Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-06-15T23:12:24.947Z] Found firebase-functions binary at '/Users/hacthe/project/sucmanh2000/server/node_modules/.bin/firebase-functions'
[info] Serving at port 8625

[info] { REDIS_URL: undefined }

[debug] [2024-06-15T23:12:25.205Z] Got response from /__/functions.yaml {"endpoints":{"app":{"availableMemoryMb":null,"timeoutSeconds":240,"minInstances":1,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-southeast1"],"labels":{},"httpsTrigger":{},"entryPoint":"app"},"postTriggerToUpdateRedisDb":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"{collectionId}/{docId}"},"retry":false},"entryPoint":"postTriggerToUpdateRedisDb"}},"specVersion":"v1alpha1","requiredAPIs":[]}
